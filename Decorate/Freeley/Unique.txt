ACTOR "Split Missile" : weapon
{
     Weapon.SelectionOrder 1200
     Weapon.SlotNumber 8
     Weapon.UpSound "gen/wepswitch"
     Inventory.PickupSound "gen/pickup"
     Inventory.Pickupmessage "You Snagged A Split Missile!"
     Weapon.AmmoGive 10
     Weapon.AmmoUse 1 
     Weapon.AmmoType "SMissiles"
     Obituary "%o was snagged by %k's Split Missile."
     +IGNORESKILL
	 +WEAPON.NOAUTOFIRE
	 Inventory.RestrictedTo "IPFreeley"	 
     States 
     { 
     Spawn: 
        PSPL A -1 
        Stop 
     Ready: 
		TNT1 A 0 A_TakeInventory("UsingFirearm", 1)
        SPLI A 1 A_WeaponReady 
        Goto Ready+1
     Deselect: 
        SPLI A 1 A_Lower 
        Loop
     Select:
      	SPLI A 1 A_Raise 
        Loop
     Fire:
	    TNT1 A 0 A_PlaySound("split/shoot1")
        SPLI E 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_JumpIfInventory("DMModeOn", 1, "DMFire")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		SPLI A 0 A_FireCustomMissile("CompSMissile",0,1,0,-8)
	Continue:
        SPLI F 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI B 1 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI C 2 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI D 1 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI D 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)		
        SPLI H 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI A 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        SPLI A 7 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        Goto Ready+1
	Coopfire:
		//TNT1 A 0 A_FireCustomMissile("SMissile1",0,0,0,-8)
		SPLI A 0 A_FireCustomMissile("SMissile",0,1,0,-8)
		Goto Continue
	DMfire:
		//TNT1 A 0 A_FireCustomMissile("SMissile1",0,0,0,-8)
		SPLI A 0 A_FireCustomMissile("DMSMissile",0,1,0,-8)
		Goto Continue		
     } 
} 

actor SMissile
{
    Radius 11
    Height 6
    Speed 40
    Damage (0)
	damagetype "RottExplosive"
    SCALE 0.50
    PROJECTILE
	Decal Scorch
	+NOBLOOD
    +BLOODLESSIMPACT
//    +SEEKERMISSILE
    +EXTREMEDEATH
	+THRUGHOST
	+THRUSPECIES
	+WINDTHRUST
	+FORCERADIUSDMG
	Species "Player"
    DeathSound "missile/die"
	Obituary "%o was snagged by %k's Split Missile."
//	ActiveSound "missile/fly"
    States
    {
    Spawn:
		TNT1 A 0
        TNT1 A 0 A_PlaySound("missile/fly",5,1.0,1,ATTN_NORM)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)		
        goto misc
    Misc:
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
    	MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		TNT1 A 0 A_JumpIf(CallACS("RoTTSplitMissile") == 0, "Split")
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        Loop
	Split:
		TNT1 A 0 A_StopSound(5)
		TNT1 A 0 A_PlaySound("split/split2")	
		TNT1 A 0 A_CustomMissile("SMissile1",0,1,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		TNT1 A 5 A_CustomMissile("SMissile2",0,0,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		stop
    Death:  
	XDeath:
		TNT1 A 0 A_StopSound(5)	
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
    	EXPL A 2 Bright A_Explode(100,64, 1, true, 32)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop
	Crash:
		TNT1 A 0 A_StopSound(5)	
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)	
		TNT1 A 0		
    	EXPL A 2 Bright A_Explode(100,64, 1, true, 32)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop	
    }
}


actor SMissile1
{
    Radius 11
    Height 6
    Speed 40
    Damage (0)
	damagetype "RottExplosive"
    SCALE 0.50
    PROJECTILE
	Decal Scorch
	+NOBLOOD
    +BLOODLESSIMPACT
    +SEEKERMISSILE
    +EXTREMEDEATH
	+THRUGHOST
	+THRUSPECIES
	+FORCERADIUSDMG
	+WINDTHRUST
	+SCREENSEEKER
	Species "Player"
    DeathSound "missile/die"
	Obituary "%o was snagged by %k's Split Missile."
//	ActiveSound "missile/fly"
    States
    {
    Spawn:
		TNT1 A 0
        TNT1 A 0 A_PlaySound("missile/fly",5,1.0,1,ATTN_NORM)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 0 A_ChangeVelocity (5.0, -10.0, 0.0,1)
        MISS A 0 A_SetAngle(-9.0 + angle)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)		
        goto misc
    Misc:
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
    	MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
		MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        Loop
    Death:  
	XDeath:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)	
    	EXPL A 2 Bright A_Explode(50,64, 1, true, 32)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop
	Crash:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(128,3)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)	
		TNT1 A 0		
    	EXPL A 2 Bright A_Explode(50,64, 1, true, 32)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop	
    }
}


actor SMissile2
{
    Radius 11
    Height 6
    Speed 42
    Damage (50)
	damagetype "RottExplosive"
    SCALE 0.50
    PROJECTILE
	Decal Scorch
	+NOBLOOD
	+BLOODLESSIMPACT
	+WINDTHRUST
    +SEEKERMISSILE
	+THRUGHOST
    +EXTREMEDEATH
	+THRUSPECIES
	+SCREENSEEKER
	Species "Player"
    DeathSound "missile/die"
//	ActiveSound "missile/fly"
	Obituary "%o was snagged by %k's Split Missile."
    States
    {
    Spawn:
		TNT1 A 0
        TNT1 A 0 A_PlaySound("missile/fly",5,1.0,1,ATTN_NORM)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 0 A_ChangeVelocity (5.0, 10.0, 0.0,1)
        MISS A 0 A_SetAngle(9.0 + angle)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        goto misc
    Misc:    
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
    	MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
		MISS A 0 a_seekermissile(5,5,SMF_LOOK)
        MISS A 1 Bright A_CustomMissile("MissileTrail",0,0,0,0)
        Loop    
    Death:  
	XDeath:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)	
    	EXPL A 2 Bright A_Explode(50,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop
	Crash:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)	
		TNT1 A 0
    	EXPL A 2 Bright A_Explode(50,64)
        EXPL BCDEFGHIJKLMNOPQRST 2 Bright
        Stop	
    }
}

Actor CompSMissile : SMissile
{
	Damage (70) 
	-THRUSPECIES
	States
	{
	Split:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("split/split2")	
		TNT1 A 0 A_CustomMissile("CompSMissile1",0,1,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		TNT1 A 5 A_CustomMissile("CompSMissile2",0,0,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		stop
	}
}

Actor DMSMissile : CompSMissile 
{
	Damage (0)
	-SEEKERMISSILE
	States
	{
	Split:
		TNT1 A 0 A_StopSound(5)		
		TNT1 A 0 A_PlaySound("split/split2")	
		TNT1 A 0 A_CustomMissile("DMSMissile1",0,1,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		TNT1 A 5 A_CustomMissile("DMSMissile2",0,0,angle,CMF_TRACKOWNER|CMF_ABSOLUTEANGLE|CMF_OFFSETPITCH,180)
		stop
	}
}

Actor CompSMissile1 : SMissile1 { Damage (35) -THRUSPECIES }
Actor CompSMissile2 : SMissile2 { Damage (35) -THRUSPECIES }
Actor DMSMissile1 : SMissile1 { Damage (0) -SEEKERMISSILE -THRUSPECIES }
Actor DMSMissile2 : SMissile2 { Damage (0) -SEEKERMISSILE -THRUSPECIES }

ACTOR Excalibat : weapon 
{
     Weapon.SlotNumber 0
     Weapon.UpSound "gen/wepswitch"
     Weapon.SelectionOrder 1000
     Inventory.PickupSound "excalibat/pu"
     Inventory.Pickupmessage "You got the Mighty Excalibat!"
     Weapon.Kickback 175
     Weapon.AmmoType "BMissiles"
     Weapon.AmmoGive 10
     Weapon.AmmoUse 1
     +FloatBob
	 +NOALERT
     +NOAUTOAIM 
     AttackSound "excalibat/hit"
     Obituary "%k killed %o. STRIKE YOU'RE OUT!!!"
     HitObituary "%k hit a home run, %o took it in the face."
	 DamageType "RottExplosive"
	 Inventory.RestrictedTo "IPFreeley"	 
     States 
     { 
     Spawn: 
        PBAT A -1 BRIGHT
        Stop 
     Ready:
        EXBT A 1 A_WeaponReady 
        EXBT A 0 A_TakeInventory("BattCharge",999)
        Loop 
     Deselect: 
        EXBT A 1 A_Lower 
        Loop 
     Select:
        EXBT A 1 A_Raise
     	EXBT A 0 A_TakeInventory("BattCharge",999)
        Loop
     //This was a real pain in the ass to code....     
     Fire:
		EXBT A 0 A_PlaySound("excalibat/charge",CHAN_WEAPON)
	Hold:	
      	EXBT A 0 A_JumpIfInventory("BattCharge",3,"Level3")
        EXBT A 0 A_JumpIfInventory("BattCharge",2,"Level2")
        EXBT A 0 A_JumpIfInventory("BattCharge",1,"Level1")
		EXBT A 6 A_GiveInventory("BattCharge",1)
		EXBT C 0 A_Refire
		TNT1 A 0 A_StopSound(CHAN_WEAPON)
		Goto Ready
      Altfire: // to make it more user friendly
		EXBT C 1 Offset(40,32) BRIGHT 
		EXBT C 1 Offset(30,34) BRIGHT A_PlaySound("excalibat/swing",CHAN_WEAPON)
		EXBT C 1 Offset(20,36) BRIGHT
		EXBT C 1 Offset(10,38) BRIGHT
		EXBT C 1 Offset(0,40) BRIGHT 
		EXBT C 1 Offset(-10,42) BRIGHT A_SetReflectiveInvulnerable
		EXBT C 1 Offset(-20,44) BRIGHT
		EXBT D 1 Offset(20,46) BRIGHT
		EXBT D 1 Offset(10,48) BRIGHT
		EXBT D 1 Offset(0,50) BRIGHT A_CustomPunch(150,1,0,"Nothing",192)
		EXBT E 1 Offset(30,52) BRIGHT
		EXBT E 1 Offset(10,54) BRIGHT
		EXBT E 1 Offset(0,56) BRIGHT
		EXBT E 1 Offset(-30,58) BRIGHT
		EXBT E 1 Offset(-50,60) BRIGHT A_UnSetReflectiveInvulnerable
		EXBT E 1 Offset(-70,62) BRIGHT
		EXBT E 1 Offset(-90,64) BRIGHT
		EXBT E 1 Offset(-110,64) BRIGHT
		EXBT F 1 Offset(0,64) BRIGHT
		EXBT F 1 Offset(-20,64) BRIGHT
		EXBT F 1 Offset(-40,64) BRIGHT 
		EXBT F 1 Offset(-60,64) BRIGHT
		EXBT F 1 Offset(-80,64) BRIGHT 
		TNT1 A 0 Offset(0,32)
		EXBT A 0 Offset(0,32) BRIGHT A_refire
		TNT1 A 0 Offset(0,32) BRIGHT
        Goto Ready
      Level1:
        EXBT B 0 A_UnSetReflective
		EXBT B 0 A_PlaySound("excalibat/charge",CHAN_WEAPON)
		EXBT AAAAAAAAAA 2 A_JumpIf(CallACS("RottBatCheck",0) == 0, "Ready")
		EXBT B 0 A_GiveInventory("BattCharge",1)
		EXBT B 0 A_Refire
        EXBT B 0 A_TakeInventory("BattCharge",999)
		TNT1 A 0 A_StopSound(CHAN_WEAPON)		
        Goto Ready
      Level2: 
		EXBT B 0 A_UnSetReflective
		EXBT A 2 A_JumpIf(CallACS("RottBatCheck",0) == 0, "Ready")
		EXBT H 2 Offset(0,32) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise1")
		EXBT I 2 Offset(0,36) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise2")
		EXBT J 2 Offset(0,42) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise3")
		EXBT K 2 Offset(0,46) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise4")
		EXBT L 2 Offset(0,50) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise5")
		EXBT A 0 A_GiveInventory("BattCharge",1)
		EXBT B 0 A_Refire
		EXBT B 0 A_TakeInventory("BattCharge",999)
		TNT1 A 0 A_StopSound(CHAN_WEAPON)		
        Goto Ready  
      Level3: // 32
        EXBT LLLLLLLLLLLLLLLLLLLLLLLLLLLLLL 2 Offset(0,52) A_JumpIf(CallACS("RottBatCheck",0) == 0, "Raise5")
        EXBT L 1 Offset(0,42) 
		EXBT L 1 Offset(0,32)
		EXBT C 1 Offset(40,32) BRIGHT 
		EXBT C 1 Offset(30,32) BRIGHT 
		EXBT C 1 Offset(20,32) BRIGHT
		EXBT C 1 Offset(10,32) BRIGHT
		EXBT C 1 Offset(0,32) BRIGHT  A_PlaySound("excalibat/blast",CHAN_WEAPON)
		EXBT C 1 Offset(-10,32) BRIGHT
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		EXBT C 1 Offset(-20,32) BRIGHT A_FireCustomMissile ("Baseball",-35,1,0,0)
		EXBT D 1 Offset(20,32)  BRIGHT A_FireCustomMissile ("Baseball",-28,0,0,0)
		EXBT D 1 Offset(10,32)  BRIGHT A_FireCustomMissile("Baseball",-21,0,0,0)
		EXBT D 1 Offset(0,32)   BRIGHT A_FireCustomMissile("Baseball",-14,0,0,0)
		EXBT E 1 Offset(30,32)  BRIGHT A_FireCustomMissile("Baseball",-7,0,0,0)
		EXBT E 1 Offset(10,32)  BRIGHT A_FireCustomMissile("Baseball",0,0,0,0)
		EXBT E 1 Offset(0,32)   BRIGHT A_FireCustomMissile("Baseball",7,0,0,0)
		EXBT E 1 Offset(-30,32) BRIGHT A_FireCustomMissile("Baseball",14,0,0,0)
		EXBT E 1 Offset(-50,32) BRIGHT A_FireCustomMissile("Baseball",21,0,0,0)
		EXBT E 1 Offset(-70,32) BRIGHT A_FireCustomMissile("Baseball",28,0,0,0)
		EXBT E 1 Offset(-90,32) BRIGHT A_FireCustomMissile("Baseball",35,0,0,0)
	  Continue:
		EXBT E 1 Offset(-110,32) BRIGHT
		EXBT F 1 Offset(0,32)    BRIGHT
		EXBT F 1 Offset(-20,32)  BRIGHT
		EXBT F 1 Offset(-40,32)  BRIGHT
		EXBT F 1 Offset(-60,32)  BRIGHT
		EXBT F 1 Offset(-80,32)  BRIGHT A_TakeInventory("BattCharge",999)
		TNT1 A 0 A_JumpIfInventory("BMissiles", 1, 2)
		TNT1 A 0 A_TakeInventory("Excalibat", 1)
	    Goto Ready
		TNT1 A 0
	    Goto Ready
	  Raise5:
		EXBT L 2 offset(0,50)
	  Raise4:
	    EXBT K 2 offset(0,46)
	  Raise3:
	    EXBT J 2 offset(0,42)
	  Raise2:
	    EXBT I 2 offset(0,36)
	  Raise1:
		EXBT H 2 offset(0,32)
	    Goto Ready
	  CoopFire:
	  	EXBT C 1 Offset(-20,32) BRIGHT A_FireCustomMissile ("BaseballCoop",-35,1,0,0)
		EXBT D 1 Offset(20,32)  BRIGHT A_FireCustomMissile ("BaseballCoop",-28,0,0,0)
		EXBT D 1 Offset(10,32)  BRIGHT A_FireCustomMissile("BaseballCoop",-21,0,0,0)
		EXBT D 1 Offset(0,32)   BRIGHT A_FireCustomMissile("BaseballCoop",-14,0,0,0)
		EXBT E 1 Offset(30,32)  BRIGHT A_FireCustomMissile("BaseballCoop",-7,0,0,0)
		EXBT E 1 Offset(10,32)  BRIGHT A_FireCustomMissile("BaseballCoop",0,0,0,0)
		EXBT E 1 Offset(0,32)   BRIGHT A_FireCustomMissile("BaseballCoop",7,0,0,0)
		EXBT E 1 Offset(-30,32) BRIGHT A_FireCustomMissile("BaseballCoop",14,0,0,0)
		EXBT E 1 Offset(-50,32) BRIGHT A_FireCustomMissile("BaseballCoop",21,0,0,0)
		EXBT E 1 Offset(-70,32) BRIGHT A_FireCustomMissile("BaseballCoop",28,0,0,0)
		EXBT E 1 Offset(-90,32) BRIGHT A_FireCustomMissile("BaseballCoop",35,0,0,0)
        Goto Continue
   } 
}

Actor BatPressing : Inventory { inventory.amount 1 inventory.maxamount 1 }

actor Baseball
{
    Radius 11
    Height 8
    Speed 50
    Damage (0)
    SCALE 0.50
    PROJECTILE
    +EXTREMEDEATH
    +FOILINVUL
	+WINDTHRUST
	+FORCERADIUSDMG	
    DeathSound "god/bang"
    DamageType "RottExplosive"	
	Obituary "%k killed %o. STRIKE YOU'RE OUT!!!"
    States
    {
    Spawn:
        BSA7 AABBCCDD 1 Bright A_CustomMissile("MissileTrail",0,0,0,0) 
        Loop
    Death:
	XDeath:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)		
		TNT1 A 0 A_Explode(75,128, 1, true, 32)
        BOMB ABCDEFGHIJKLMNOPQRST 2 Bright
        Stop
	Crash:
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)	
		TNT1 A 0
		TNT1 A 0 A_Explode(75,128, 1, true, 32)
        BOMB ABCDEFGHIJKLMNOPQRST 2 Bright
        Stop	
    }
} 

Actor BaseBallCoop : BaseBall {	Damage (50) Species "Player" +THRUSPECIES +DONTHARMCLASS +DONTHARMSPECIES }
Actor BattCharge : Ammo { Inventory.MaxAmount 3 Ammo.BackpackAmount 0 Ammo.BackpackMaxAmount 3 }

Actor Nothing
{
	DamageType "RottExplosive"
	Obituary "%k \cbhit a home run,\c- %o \cbtook it in the face.\c-"
	States
	{
		spawn:
		crash:
			TNT1 A 1 A_PlaySound("excalibat/miss")
			STOP
	}
}

// Rott unique things

Actor GodProtection : PowerProtection {	damagefactor "normal", 0.0 powerup.duration -30 }

Actor GodRevert : CustomInventory
{
	Inventory.Amount 1
	Inventory.MaxAmount 1
	+Inventory.AUTOACTIVATE
	States
	{
		Use:
			TNT1 A 0 A_ChangeFlag("PICKUP", 1)
			Stop
	}
}

ACTOR "God Hand" : Weapon
{
    Weapon.SelectionOrder 1
    Weapon.UpSound "gen/wepswitch"
    Inventory.PickupSound "gen/pickup"
    Inventory.Pickupmessage "GOD MODE"
    DamageType "GodHand"
    SCALE 0.50
    +NOGRAVITY
	+UNDROPPABLE
    donthurtshooter
    Obituary "\cbThe God\c- %k \ctook\c- %o\c's soul\c-"
    Inventory.RestrictedTo "IPFreeley"	
    States 
    { 
     Spawn: 
        GODM ABCDEFG 2 Bright 
        Loop
     Ready:
        GODH AAA 35 A_WeaponReady
		TNT1 A 0 A_PlaySound("godsounds")
        Loop
     Deselect: 
		Goto Ready
     Select:
		TNT1 A 0 ACS_NamedExecuteAlways("RoTTGodHand", 0)
        GODH A 1 A_Raise
        Goto Select+1
     Fire: 
        GODH A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)	 	
	 Hold:
        GODH BB 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        GODH CC 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        GODH DD 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlayWeaponSound("god/zap")
        GODH EE 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        TNT1 A 0 A_GunFlash
		GODH FF 2 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_FireCustomMissile("GodMissile",0,8,0,-3)
        GODH GG 2 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        GODH HHH 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        GODH A 0 A_ReFire
        Goto Ready 	
    } 
}
  
actor GodMissile
{
    Radius 8
    Height 6
    Speed 20
    Damage (50000)
    SCALE 0.50
	+THRUACTORS
    +FRIENDLY
    +FOILINVUL
    +SEEKERMISSILE
    +NOWALLBOUNCESND
	+SPECTRAL
	+LOOKALLAROUND
	+BLOODLESSIMPACT
	+NOBLOOD
	+FORCERADIUSDMG	
    DONTHURTSHOOTER
    PROJECTILE
	reactiontime 85
	Obituary "%o met %p maker."
    DamageType "RottDisintegrate"
    SeeSound "god/projectile"
    DeathSound "ksphere/death"
    States
    {  
    Spawn:
	   TNT1 A 0
	SpawnLoop:
	   TNT1 A 0 A_CountDown
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
       GODP A 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP A 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP B 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP B 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP C 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP C 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP D 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP D 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP A 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP A 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP B 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP B 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP C 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP C 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP D 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
	   GODP D 1 BRIGHT a_seekermissile(90,90,SMF_LOOK|SMF_PRECISE,256)
	   TNT1 A 0 A_Explode(50000,8,0,0,8)
       Loop
    Death:
	XDeath:
	   TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)	
	   TNT1 A 0 A_SpawnItem("GodExplosion")
	   BOMB ABCDEFGHIJKLMNOPQRST 2 Bright
       Stop 
	Crash:
	   TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
	   TNT1 A 0 A_Jump(250,2)
	   TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)	
	   TNT1 A 0	   
	   TNT1 A 0 A_SpawnItem("GodExplosion")
	   BOMB ABCDEFGHIJKLMNOPQRST 2 Bright
       Stop 	
    }
}  

Actor GodExplosion
{
	PROJECTILE
	Speed 0
	Damage 0
    DamageType "RottDisintegrate"
	+FORCERADIUSDMG
    +FOILINVUL	
	States
	{
		Spawn:
			TNT1 AA 0 A_Explode(128,128,0,0,1)
			TNT1 A 1
		Stop
	}
}

Actor AsbestosArmor : PowerProtection
{
	DamageFactor "Fire", 0.25
	DamageFactor "RottFire", 0.25
	DamageFactor "RottExplosive", 0.25
	DamageFactor "Explosive", 0.25
	RadiusDamageFactor 0.25
	Powerup.Duration -45
}

Actor AsbestosIronFeet : PowerIronFeet
{
	Powerup.Duration -45
	Powerup.Color 0, 0, 0, 0
}

Actor BulletProofVest : PowerProtection
{
	DamageFactor "DoomBullet", 0.0
	Powerup.Duration -45
}

ACTOR "Dark Staff" : Weapon
{
     Weapon.SelectionOrder 250
     Weapon.UpSound "gen/wepswitch"
     Inventory.PickupSound "gen/pickup"
     Weapon.SlotNumber 9
     Inventory.Pickupmessage "You wield the Dark Staff!"
     +NOAUTOAIM 
     +NOGRAVITY
     Weapon.AmmoGive 10
     Weapon.AmmoUse 1 
     Weapon.AmmoType "DSEnergy"
     Obituary "%o felt the power of %k's Dark Staff."
	 Inventory.RestrictedTo "IPFreeley"	 
     States
     { 
     Spawn: 
        PKE_ A -1
        Stop 
     Ready: 
        KES_ A 1 A_WeaponReady 
        Loop 
     Deselect: 
        KES_ A 1 A_Lower
        Loop 
     Select: 
        KES_ A 1 A_Raise
        Loop 
     Fire: 
        KES_ A 2 Bright A_PlaySound("ksphere/charge",CHAN_WEAPON)
        KES_ B 9 Bright
        KES_ C 9 Bright
        KES_ D 9 Bright
        KES_ E 9 Bright
		KES_ F 0 A_PlaySound("ksphere/fire",CHAN_WEAPON)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
        KES_ F 1 Bright A_FireCustomMissile("Ksphere_Rott",0,1,0,-5)
		Goto Continue
        KES_ F 1 Bright A_FireCustomMissile("Ksphere_Rott_2",0,1,0,-5)		
	Continue:
        KES_ F 1 Bright Offset(0,34)
        KES_ F 1 Bright Offset(4,40)
        KES_ F 1 Offset(8,50)
        KES_ F 1 Offset(12,60)
        KES_ F 1 Offset(16,70)
        KES_ A 1 Offset(20,80)
        KES_ A 1 Offset(16,70)
        KES_ A 1 Offset(12,60)
        KES_ A 1 Offset(8,50)
        KES_ A 1 Offset(4,40)
        KES_ A 1 Offset(2,34)
        KES_ A 10
        KES_ A 7 Offset(0,33)
		TNT1 A 0 A_JumpIfInventory("DSEnergy", 1, 2)
		TNT1 A 0 A_TakeInventory("Dark Staff", 1)	
	    Goto Deselect
		TNT1 A 0
	    Goto Ready 
	 } 
}

actor Ksphere_Rott
{
    Radius 11
    Height 8
    Speed 60
    Damage (0)
    +RIPPER
    +MISSILE
    +EXTREMEDEATH
	+FORCERADIUSDMG
	+THRUACTORS
    PROJECTILE
    RENDERSTYLE Normal
    damagetype "RottExplosive"	
    SCALE 0.6
    SeeSound "ksphere/projectile"
	Obituary "%o felt the power of %k's Dark Staff."
    DeathSound "ksphere/death"
    States
    {  
      Spawn:
		TNT1 A 0
		TNT1 A 0 A_JumpIf(CallACS("Samsara_ProjectilePredictor",4)==1,1)
		KSP_ ABCDEFIJ 1 BRIGHT ACS_NamedExecuteAlways("Samsara_ProjectilePredictor",0,4,0,0)
		Loop
      Death:
	  XDeath:	  
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)	  
		EXPL A 1 Bright A_Explode(75,128)
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL A 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL B 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL B 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL C 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL C 1 Bright
		EXPL DEFGHIJKLMNOPQRS 2 Bright 
		EXPL T 2 Bright A_FadeOut
		Stop
	  Crash: 
		TNT1 A 0 A_PlaySound("gen/expl2",6,1.0,0,ATTN_NORM)
		TNT1 A 0 A_Jump(250,2)
		TNT1 A 0 A_PlaySound("rmissile/cook",5,1.0,0,ATTN_NORM)		  
		TNT1 A 0	   
		EXPL A 1 Bright A_Explode(75,128)
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL A 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL B 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL B 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL C 1 Bright
		NULL AA 0 A_SpawnItemEx("Rott_ash1",0.0,0.00,16.00,random(5.00,10.00),random(5.00,10.00),random(5.00,10.00),random(0.00,360),SXF_CLIENTSIDE)
		EXPL C 1 Bright
		EXPL DEFGHIJKLMNOPQRS 2 Bright 
		EXPL T 2 Bright A_FadeOut
		Stop	   
    }    
}

Actor Ksphere_Rott_Explosion
{
	Projectile
	Height 8
	Radius 11
	Speed 0
	Obituary "%o felt the power of %k's Dark Staff."
	damagetype "RottExplosive"
	+NOINTERACTION
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Explode(50,11,!XF_HURTSOURCE,0,11)
			TNT1 A 1
			Stop
	}
}

actor Ksphere_Rott_2 : Ksphere_Rott { Species "Player" +THRUSPECIES +DONTHARMCLASS +DONTHARMSPECIES +MTHRUSPECIES }

actor Rott_ash1
{
	radius 10
	height 10
	speed 0
	gravity 0.75
    +NOBLOCKMONST
    +SLIDESONWALLS
    +CORPSE
	+MOVEWITHSECTOR
    -SOLID
	+CLIENTSIDEONLY
    SCALE 0.50
    States
    {
    Spawn:   
		ASH_ AB 2 Bright
        Loop
    Death:
	Crash:
		TNT1 A 0 A_Jump(128,1)
		TNT1 A 0 A_PlaySound("gen/ashg")
		ASH_ CDEFGHIJKL 2 Bright
		ASH_ L 250 Bright
		ASH_ L 1 Bright A_FadeOut
		Goto Death+13
    }
}

ACTOR DogPlayer : IPFreeley
{
  Player.ViewHeight 16
  Player.AttackZOffset 8
//MaxStepHeight 25
  Gravity 0.9
  Player.MorphWeapon "Doggie"
  Player.ColorRange 112, 127
  XScale 0.68
  YScale 0.65
  +NOPAIN
  +NODAMAGE
  States
  {
  Spawn:
	IPDG A 1
	Loop
  See:
	IPDG ABCD 4
	Loop
  Missile:
	IPDG E 3
	Goto Spawn
  }
}

Actor DogUp
{
States
 {
  Spawn:
    NULL A 1 
    Stop
    }
}

Actor DogDown
{
States
 {
  Spawn:
    NULL A 1 
	TNT1 A 0 A_TakeInventory("Doggie")
    NULL A 1 A_playsound("gen/dogdown")
    Stop
    }
}

Actor DogProtection : PowerProtection {	damagefactor "normal", 0.0 powerup.duration -30 }

ACTOR DoggyMorph : PowerMorph
{
 PowerMorph.PlayerClass "DogPlayer"
 PowerMorph.MorphFlash "DogUp"
 PowerMorph.UnMorphFlash "DogDown"
 PowerMorph.MorphStyle MRF_WHENINVULNERABLE|MRF_LOSEACTUALWEAPON
}

ACTOR DogMode : PowerupGiver
{
	Inventory.pickupmessage "Dog Mode!"
   	Inventory.MaxAmount 0
	Inventory.PickupSound "DSNONE"	
	Powerup.Duration -30
	Powerup.Type DoggyMorph
	Powerup.Mode DogProtection
	Scale 0.50
	+COUNTITEM	
	+NOGRAVITY
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
    States
    {
		Spawn:
			DOGM MNOPQRST 2 Bright
			Loop
    }
}

ACTOR Doggie : Weapon   
{
     Weapon.SelectionOrder 350
     Weapon.UpSound "gen/wepswitch"
     Inventory.PickupSound "gen/pickup"
     Inventory.Pickupmessage "Dog Mode!"
     Damage 500
     Scale 0.50
     ExplosionDamage 500
     ExplosionRadius 512
     DontHurtShooter
     Obituary "%o was mauled by %k"     
     States
     { 
     Spawn: 
        DOGM MNOPQRST 2 Bright
        Loop 
     Ready:
		TNT1 A 0 A_JumpIfInventory("DogProtection",1,2)
		TNT1 A 0 A_TakeInventory("Doggie",1)
		TNT1 A 0 A_TakeInventory("DogCharge",999)	 
	 ReadyLoop:
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
		TNT1 A 0 A_Jumpif(CallACS("RottDogCheck",0)==1,"DogUse")
		DOGM A 7 A_WeaponReady
        DOGM A 0 A_Jump(128,"Ready2","Ready3","Ready4")	   
        Loop
	 Ready2:	
		DOGM BB 2 A_WeaponReady
        DOGM CC 2 A_WeaponReady
        DOGM C 0 A_PlaySound("rdog/lick")
        DOGM DD 2 A_WeaponReady
        DOGM EE 2 A_WeaponReady
		DOGM AA 2 A_WeaponReady
		Goto ReadyLoop
	 Ready3:
		DOGM BB 2 A_WeaponReady
        DOGM CC 2 A_WeaponReady
        DOGM C 0 A_PlaySound("rdog/bark")
        DOGM DD 2 A_WeaponReady
        DOGM EE 2 A_WeaponReady
		DOGM AA 2 A_WeaponReady
		Goto ReadyLoop
	 Ready4:	
		DOGM BB 2 A_WeaponReady
        DOGM CC 2 A_WeaponReady
        DOGM C 0 A_PlaySound("rdog/pan")
        DOGM DD 2 A_WeaponReady
        DOGM EE 2 A_WeaponReady
		DOGM AA 2 A_WeaponReady
		Goto ReadyLoop
	 DogUse:
		DOGM IIJJKKLL 2
		Goto ReadyLoop
	 Deselect: 
		Goto ReadyLoop
     Select: 
     	TNT1 A 0 ACS_NamedExecuteAlways("DogRevert", 0)
		DOGM A 0 A_TakeInventory("DogCharge",999)
		Goto SelectLoop
     SelectLoop:	
        DOGM A 1 A_Raise
        Loop
     Fire:
		DOGM A 0 A_JumpIfInventory("DogCharge",7,"Level7")
		DOGM A 0 A_JumpIfInventory("DogCharge",6,"Level6")
     	DOGM A 0 A_JumpIfInventory("DogCharge",5,"Level5")
     	DOGM A 0 A_JumpIfInventory("DogCharge",4,"Level4")
     	DOGM A 0 A_JumpIfInventory("DogCharge",3,"Level3")
        DOGM A 0 A_JumpIfInventory("DogCharge",2,"Level2")
        DOGM A 0 A_JumpIfInventory("DogCharge",1,"Level1")
    	DOGM A 5 A_GiveInventory("DogCharge",1)
        DOGM A 0 A_ReFire
     Fire2:
		DOGM A 0 A_PlaySound("rdog/chew")
		DOGM F 0 A_CustomPunch(10,1,1,"BLANKPUFF")
        DOGM FF 1
        DOGM FF 1 A_CustomPunch(10,1,1,"BLANKPUFF")
		DOGM GG 1 
        DOGM GG 1 A_CustomPunch(10,1,1,"BLANKPUFF") 
        DOGM HH 1 
        DOGM HH 1 A_CustomPunch(10,1,1,"BLANKPUFF")
        DOGM A 8
        TNT1 A 0 A_TakeInventory("DogCharge",999)
        Goto Ready
     Level1:  
     	DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge1",CHAN_AUTO,1.0)
		DOGM A 4
		DOGM A 1
		DOGM B 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
        DOGM B 0 A_TakeInventory("DogCharge",999)
        Goto Ready
      Level2:
		DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge2",CHAN_AUTO,1.0)	
		DOGM A 4
		DOGM A 1
		DOGM A 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
		DOGM B 0 A_TakeInventory("DogCharge",999)
		Goto Ready
      Level3: 
		DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge3",CHAN_AUTO,1.0)	
		DOGM A 4
		DOGM A 1		
		DOGM A 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
		DOGM B 0 A_TakeInventory("DogCharge",999)
        Goto Ready
      Level4: 
		DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge4",CHAN_AUTO,1.0)	
		DOGM A 4
		DOGM A 1		
		DOGM A 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
		DOGM B 0 A_TakeInventory("DogCharge",999)
		Goto Ready
	Level5: 
		DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge5",CHAN_AUTO,1.0)	
		DOGM A 4
		DOGM A 1		
		DOGM A 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
		DOGM B 0 A_TakeInventory("DogCharge",999)
		Goto Ready
	Level6: 
		DOGM A 4
		DOGM A 4
		DOGM A 4 A_PlaySound("rdog/charge6",CHAN_AUTO,1.0)	
		DOGM A 4
		DOGM A 1		
		DOGM A 0 A_GiveInventory("DogCharge",1)
		DOGM B 0 A_Refire
		DOGM B 0 A_TakeInventory("DogCharge",999)
        Goto Ready
      Level7:
		DOGM A 0 ThrustThingZ(0,32,0,0)
		DOGM A 0 A_PlaySound("rdog/blast")  
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopLevel7")
		DOGM A 0 A_FireCustomMissile("Barkblast",0,1,0,-5)
		DOGM A 0 A_TakeInventory("DogCharge",999)  
		DOGM FFGGHHAAA 2
		Goto Ready 
      CoopLevel7:
		DOGM A 0 A_FireCustomMissile("Barkblast_Coop",0,1,0,-5)
		DOGM A 0 A_TakeInventory("DogCharge",999)  
		DOGM FFGGHHAAA 2
		Goto Ready 
     } 
}

Actor Barkblast
{ 
   Radius 8
   Height 6
   Speed 0
   Damage 50
   Scale 0.50
   PROJECTILE
   +EXTREMEDEATH
   +FOILINVUL
   DONTHURTSHOOTER
   Damage 5
   ExplosionDamage 350
   ExplosionRadius 1024
   +SEEKERMISSILE
   damagetype "RottExplosive"
   States
   {
    Spawn:    	
        NULL A 5 A_Gravity
        NULL A 1 A_Explode
        Loop
    Death:
        NULL A 1
        Stop
    }
}

Actor Barkblast_Coop : Barkblast
{ 
    Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	+NODAMAGETHRUST
}

ACTOR DogCharge : Ammo { Inventory.MaxAmount 7 Ammo.BackpackAmount 0 Ammo.BackpackMaxAmount 7 }