Actor IPOGRandomItemGenerator : CustomInventory
{
	inventory.amount 0
	inventory.maxamount 0
	+INVENTORY.UNDROPPABLE
	+INVENTORY.AUTOACTIVATE
	+INVENTORY.ALWAYSPICKUP
    +INVBAR
    Inventory.PickupSound "greed/pickup"
    //Inventory.PickupMessage "You picked up a Random Item!"
    Inventory.RestrictedTo "POGreedPlayer"	 		
	States
	{
		Spawn:
			UNIQ B -1 bright
			Stop			
		Use:
			TNT1 A 0
			TNT1 A 0 A_Jump(256, "ShieldCharge", "IPOGGrenade", "ProxMine", /*"ReversoPill",*/ "TimeBomb", "Clone")
			Stop
		ShieldCharge:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 1 ShieldCharge!")
			TNT1 A 0 A_GiveInventory("ShieldCharge", 1)
			Stop
		IPOGGrenade:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 5 Grenades!")
			TNT1 A 0 A_GiveInventory("IPOGGrenadeItem", 5)
			Stop
		ProxMine:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 5 Proximity Mines!")
			TNT1 A 0 A_GiveInventory("IPOGProximityMineItem", 5)
			Stop
		TimeBomb:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 5 Time Bombs!")
			TNT1 A 0 A_GiveInventory("IPOGTimeBombItem", 5)
			Stop
		Clone:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 1 Clone!")
			TNT1 A 0 A_GiveInventory("IPOGCloneItem", 1)
			Stop
		ReversoPill:
			TNT1 A 0 A_Print("It's a Random Item Generator! You received 1 Reverso Pill!")
			TNT1 A 0 A_GiveInventory("IPOGReversoPill", 1)
			Stop	
	}
}

// Medtube - restores +25 HP
Actor Medtube : HealthPickup
{
  Health 25
  +COUNTITEM
  +FLOATBOB
  +INVENTORY.PICKUPFLASH
  +INVENTORY.FANCYPICKUPSOUND
  Inventory.Icon "IMEDZ0"
  Inventory.PickupSound "greed/pickup"
  Inventory.PickupMessage "You picked up the Medtube!"
  Inventory.Amount 1
  Inventory.MaxAmount 20
  Tag "Medtube: restores 25 HP on use"
}

ACTOR IPOGCharge : PowerProtection
{
    Powerup.Duration -30
	Powerup.Color 0,255,255, 0.2	
	DamageFactor 0.5
	damagefactor "normal", 0.5
	DamageFactor "WolfenFlamethrower", 0.5
	DamageFactor "DukeExplosive", 0.5
	DamageFactor "DukeSpectral", 0.5
	DamageFactor "MightyBoot", 0.5
	DamageFactor "DukeIce", 0.5
	DamageFactor "Explosive", 0.5
	DamageFactor "CyberExplosive", 0.5
	DamageFactor "CorvusCrossbow", 0.5
	DamageFactor "CorvusHellstaff", 0.5
	DamageFactor "CorvusHellstaffTomed", 0.5
	DamageFactor "MarathonPlasma", 0.5
	DamageFactor "BJSpear", 0.5
	DamageFactor "DoomCacodemon", 0.5
	DamageFactor "DoomHellNoble", 0.5
	DamageFactor "DoomSpiderPlasma", 0.5
	DamageFactor "DoomTheseGuysAreTheBest", 0.5
	DamageFactor "HereNitrogolem", 0.5
	DamageFactor "HereAxeGreen", 0.5
	DamageFactor "HereAxeRed", 0.5
	DamageFactor "Wizard", 0.5
	DamageFactor "HereLichWind", 0.5
	DamageFactor "HereDsparil", 0.5
	DamageFactor "HexBishop", 0.5
	DamageFactor "HexSlaughtaur", 0.5
	DamageFactor "HexGreenFire", 0.5
	DamageFactor "HexStalkerShot", 0.5
	DamageFactor "HexHeresiarchPurple", 0.5
	DamageFactor "WTMelee", 0.5
	DamageFactor "WTRangedFire", 0.5
	DamageFactor "WTMeleeIce", 0.5
	DamageFactor "WTRangedIce", 0.5
	DamageFactor "Nuke", 0.5
	DamageFactor "PGBullet", 0.5
	DamageFactor "PGPlasma", 0.5
	DamageFactor "PGLaser", 0.5
	DamageFactor "PGFire", 0.5
	DamageFactor "PGExplosive", 0.5
	DamageFactor "Disruptoruniversaldamageshit4", 0.5
	DamageFactor "Disruptoruniversaldamageshit3", 0.5
	DamageFactor "Disruptoruniversaldamageshit2",	0.5
	DamageFactor "DisruptorWall", 0.5
	DamageFactor "MarathonFusion", 1.0
	DamageFactor "Kamikaze", 1.0
	DamageFactor "ZorchKamikaze", 1.0
	DamageFactor "Suicide", 1.0
	DamageFactor "Telefrag", 1.0
}

Actor ShieldCharge : CustomInventory
{
  Inventory.Amount 1
  Inventory.MaxAmount 3
  Inventory.PickupSound "greed/pickup"
  Inventory.PickupMessage "You picked up a Charge Pack!"
  -INVENTORY.AUTOACTIVATE
  +INVENTORY.FANCYPICKUPSOUND
  +INVENTORY.INVBAR
  +INVENTORY.PICKUPFLASH
  +COUNTITEM
  +FLOATBOB
  +NOGRAVITY
  Inventory.Icon "ICHAZ0"
  Tag "Shield Charge: gives extra protection for 30 seconds"
	States
	{
	Spawn:
		ICHA X 1 Bright
		Loop
	Use:
		TNT1 A 0 A_Print("More resistance against explosions and hazardous elements for 30 seconds!")
		TNT1 A 0 A_PlaySound("greed/suse",CHAN_VOICE)
		TNT1 A 0 A_GiveInventory("IPOGCharge")
        Stop
	}
}

// Grenade - the name says it all :P
actor IPOGGrenadeItem : CustomInventory
{
    +FLOATBOB
    Inventory.Amount 1
    Inventory.MaxAmount 10
    +INVBAR
	+INVENTORY.HUBPOWER
    +INVENTORY.UNDROPPABLE
	Inventory.InterhubAmount 5
    Inventory.Icon "IGREZ0"
    Inventory.PickupSound "greed/pickup"
    Inventory.PickupMessage "You picked up a Grenade!"
	Tag "Grenade: launches a low gravity grenade"
    States
    {
      
	  Spawn:
        IGRE X 1 Bright
        Loop
	  Use:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"UseCoop")	
	  UseComp:
        TNT1 A 0 A_FireCustomMissile("IPOGGrenade",0,0,0,-2,0,0)
        Stop
	  UseCoop:
		TNT1 A 0 A_FireCustomMissile("IPOGGrenadeCoop",0,0,0,-2,0,0)
        Stop
      UseFail:
        TNT1 A 0
        fail
    }
}

actor IPOGGrenade
{
    Decal Scorch
    Radius 8
    Height 16
    Mass 1
//	Health 5
    Speed 17
    Damage 0
    DamageType "IPOGGrenade"
    //DeathSound "greed/rockboom"
    Projectile
    -NOGRAVITY
    +LOWGRAVITY
    +FORCERADIUSDMG
	+BLOODLESSIMPACT
	+HITTRACER
	+CANNOTPUSH
	+NODAMAGETHRUST
	-EXTREMEDEATH
	+NOEXTREMEDEATH
	-SKYEXPLODE
//	+SHOOTABLE
	var int user_angle;
    States
    {
      Spawn:
	    GP10 A 0
		GP10 A 0 A_PlaySound("greed/bombfly",CHAN_BODY)
	  SpawnContinue:
        GP10 A 1 Bright
        Loop
	  XDeath:
		TNT1 A 0 A_GiveInventory("IPOGBloodGenerator", 1, AAPTR_TRACER)
      Death:
		TNT1 A 0 A_PlaySound("greed/rockboom")
        TNT1 A 0 A_NoGravity
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,0)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,30)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,60)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,90)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,120)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,150)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,180)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,210)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,240)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,270)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,300)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet2",0,0,330)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,0)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,45)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,90)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,135)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,180)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,225)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,270)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",-32,0,315)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,0)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,45)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,90)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,135)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,180)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,225)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,270)
		TNT1 A 0 A_CustomMissile("IPOGGrenadeBullet",32,0,315)
		TNT1 A 0 A_Jump(128,"Finish2")
		GP30 BCD 4 bright A_Stop
		Stop
	  Finish2:
		GP31 ABCD 4 bright A_Stop
		Stop
    }
}

Actor IPOGGrenadeBullet
{
	Projectile
	Speed 32
	//Damage (25)
	Height 16
	Radius 8
	DamageType "IPOGGrenade"
	+HITTRACER
	+BLOODLESSIMPACT
	+FORCERADIUSDMG
	States
	{
		Spawn:
			TNT1 A 0
			GP30 A 2 bright
			Goto Death
		XDeath:
			TNT1 A 0 A_GiveInventory("IPOGBloodGenerator", 1, AAPTR_TRACER)
		Death:
			TNT1 A 0 A_Explode(25,25,0,0,25)
			TNT1 A 0 A_Jump(128,"Death2")
			GP30 BCD 4 bright A_Stop
			Stop
		Death2:
			GP31 ABCD 4 bright A_Stop
			Stop
	}
}

Actor IPOGGrenadeBullet2 : IPOGGrenadeBullet
{
	States
	{
		Spawn:
			TNT1 A 0
			GP30 A 3 bright
			Goto Death
	}
}

actor IPOGGrenadeCoop : IPOGGrenade
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	DamageType "C7MineBoom"
	States
	{
		Death:
		TNT1 A 0 A_NoGravity
		TNT1 A 0 A_CustomMissile("IPOGGrenadeExplosionCoop")
		TNT1 A 5 A_SpawnItemEx("IPOGExplosionEffect")
		Stop
	}
}

actor IPOGGrenadeExplosion
{
    Radius 1
    Height 1
    Speed 0
    Damage 0
    Projectile
    Decal Scorch
	+CANNOTPUSH
	+NODAMAGETHRUST
	DamageType "IPOGGrenade"
    States
    {
      Spawn:
        TNT1 A 1 A_Die
        Goto Death
      Death:
        TNT1 A 2 Bright A_Explode(215, 192, 1, 0, 96)
        Stop
    }
}

Actor IPOGGrenadeExplosionCoop : IPOGGrenadeExplosion
{
	Species "Player"
	+THRUSPECIES
	+MTHRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	DamageType "C7MineBoom"
}

actor IPOGTimeBombItem : CustomInventory
{
    +FLOATBOB
    Inventory.Amount 1
    Inventory.MaxAmount 10
    +INVBAR
	+INVENTORY.HUBPOWER
    +INVENTORY.UNDROPPABLE
	Inventory.InterhubAmount 5
    Inventory.Icon "IBOMZ0"
    Inventory.PickupSound "greed/pickup"
    Inventory.PickupMessage "You picked up the Time Bomb!"
	Tag "Time Bomb: after 3 seconds, the bomb detonates"
    States
    {
      Spawn:
        IBOM X 1 Bright
        Loop
      Use:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"UseCoop")	
	  UseComp:
        TNT1 A 0 A_FireCustomMissile("IPOGTimeBomb",0,0,0,-40,0,0)
        Stop
	  UseCoop:
		TNT1 A 0 A_FireCustomMissile("IPOGTimeBombCoop",0,0,0,-40,0,0)
        Stop
      UseFail:
        TNT1 A 0
        fail
    }
}

actor IPOGTimeBomb
{
    Decal Scorch
    Radius 6
    Height 8
	Health 10
    Mass 10000000
    Damage 0
    DamageType "IPOGTimeBomb"
    DeathSound "greed/flamehit"
    Projectile
    //Obituary ""
    +NOGRAVITY
    +FORCERADIUSDMG
    +BLOODLESSIMPACT
	-EXTREMEDEATH
	+NOEXTREMEDEATH
	+CANNOTPUSH
	+NODAMAGETHRUST
	+SHOOTABLE
	+MOVEWITHSECTOR
    States
    {
      Spawn:
        IBOM Y 70 Bright
		TNT1 A 0 A_Die
      Death:
        TNT1 A 0 A_NoGravity
		TNT1 A 0 A_CustomMissile("IPOGTimeBombExplosion")
		TNT1 A 5 A_SpawnItemEx("IPOGExplosionEffect")
        Stop
    }
}

Actor IPOGTimeBombCoop : IPOGTimeBomb
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	DamageType "C7MineBoom"
	States
	{
		Death:
		TNT1 A 0 A_NoGravity
		TNT1 A 0 A_CustomMissile("IPOGTimeBombExplosionCoop")
		TNT1 A 5 A_SpawnItemEx("IPOGExplosionEffect")
		Stop
	}
}

actor IPOGTimeBombExplosion
{
    Radius 1
    Height 1
    Speed 0
    Damage 0
    Projectile
    Decal Scorch
	+CANNOTPUSH
	+NODAMAGETHRUST
	DamageType "IPOGTimeBomb"
    States
    {
      Spawn:
        TNT1 A 1 A_Die
        Goto Death
      Death:
        TNT1 A 2 Bright A_Explode(250, 192, 1, 0, 96)
        Stop
    }
}

Actor IPOGTimeBombExplosionCoop : IPOGTimeBombExplosion
{
	Species "Player"
	+THRUSPECIES
	+MTHRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	DamageType "C7MineBoom"
}

// Proximity Mine - after 2 seconds, if someone (monster for COOP, or player for COMP) step on it, it'll explode!
actor IPOGProximityMineItem : CustomInventory
{
	+FLOATBOB
    Inventory.Amount 1
    Inventory.MaxAmount 10
    +INVBAR
	+INVENTORY.HUBPOWER
    +INVENTORY.UNDROPPABLE
	Inventory.InterhubAmount 5
    Inventory.Icon "IMINZ0"
    Inventory.PickupSound "greed/pickup"
    Inventory.PickupMessage "You got a Proximity Mine!" 
	Tag "Proximity Mine: places a mine in the ground. Its armed after 2 seconds"
    States
    {
      Spawn:
        IMIN X 1 Bright
        Loop
      Use:
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"UseCoop")	
	  UseComp:
        TNT1 A 0 A_SpawnItemEx("IPOGProximityMine",0,0,0,0,0,0,0,SXF_SETMASTER)
        Stop
	  UseCoop:
        TNT1 A 0 A_SpawnItemEx("IPOGProximityMineCoop",0,0,0,0,0,0,0,SXF_SETMASTER)
        Stop		
      UseFail:
        TNT1 A 0
        fail
    }
}

Actor IPOGProximityMine
{
	Monster
	Health 3
	-SOLID
	-SHOOTABLE
	-COUNTKILL
	+NOBLOCKMAP
	+DROPOFF
	+THRUACTORS
	+MOVEWITHSECTOR	
	+CANNOTPUSH
	+NODAMAGETHRUST
	-EXTREMEDEATH
	+NOEXTREMEDEATH
	+SHOOTABLE
	Speed 0
	Radius 1
	Height 32
	MeleeRange 64
	DamageType "IPOGProxyMine"
	States
	{
	Spawn:
	Active:
		IMIN Y 70
		TNT1 A 0 A_ClearTarget
	ActiveLoop:
		IMIN Y 1 Bright A_LookEx (LOF_NOSOUNDCHECK, 0, 64)
		Loop
	See:
	    TNT1 A 0 A_Playsound("greed/rockboom")
		TNT1 A 0 A_CustomMissile("IPOGProxyMineExplosion")
		TNT1 A 0 A_SpawnItemEx("IPOGExplosionEffect")
		TNT1 A 1 A_Die
	Death:
		TNT1 A 5
		Stop
	}
}

Actor IPOGProximityMineCoop : IPOGProximityMine
{ 
	DamageType "C7MineBoom"
	Species "Player" 
	+THRUSPECIES 
	+DONTHARMCLASS 
	+DONTHARMSPECIES 
	+MTHRUSPECIES 
	states
	{
	Spawn:
	Active:
		IMIN Y 70
		TNT1 A 0 A_ClearTarget
	ActiveLoop:
		IMIN Y 1 Bright A_LookEx (LOF_NOSOUNDCHECK, 0, 64)
		Loop
	See:
	    TNT1 A 0 A_Playsound("greed/rockboom")
		TNT1 A 0 A_CustomMissile("IPOGProxyMineExplosionCoop")
		TNT1 A 0 A_SpawnItemEx("IPOGExplosionEffect")
		TNT1 A 1 A_Die
	Death:
		TNT1 A 5
		Stop		
	}	
}

actor IPOGProxyMineExplosion
{
    Radius 1
    Height 1
    Speed 0
    Damage 0
    Projectile
    Decal Scorch
	+CANNOTPUSH
	+NODAMAGETHRUST
	DamageType "IPOGProxyMine"
    States
    {
      Spawn:
        TNT1 A 1 A_Die
        Goto Death
      Death:
        TNT1 A 2 Bright A_Explode(230, 192, 1, 0, 96)
        Stop
    }
}

actor IPOGProxyMineExplosionCoop : IPOGProxyMineExplosion
{
	Species "Player"
	+THRUSPECIES
	+MTHRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	DamageType "C7MineBoom"
}

// Clone - creates a clone of Mooman. It has slot 6 equipped
actor IPOGCloneItem : CustomInventory
{
	+FLOATBOB
    Inventory.Amount 1
    Inventory.MaxAmount 5
    +INVBAR
    +INVENTORY.UNDROPPABLE
    Inventory.Icon "ICLOZ0"
    Inventory.PickupSound "greed/pickup"
    Inventory.PickupMessage "You got a Clone!"
	Tag "Clone: creates a clone of yourself"
    States
    {
      Spawn:
        ICLO X 1 Bright
        Loop
      Use:
		TNT1 A 0 A_AlertMonsters
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"UseCoop")
	  UseComp:
        TNT1 A 0 A_SpawnItemEx("MoomanCloneComp",0,0,0,0,0,0,0,304)
        Stop
	  UseCoop:
		TNT1 A 0 A_SpawnItemEx("MoomanCloneCoop",0,0,0,0,0,0,0,304)
        Stop
      UseFail:
        TNT1 A 0
        fail
    }
}

ACTOR MoomanCloneCOMP
{
  Health 500
  Scale 0.42
  Radius 16
  Height 56
  Speed 8
  PainChance 96
  Monster
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +FRIENDLY
  -NOTELEPORT
  +NOTELEFRAG
  +THRUSPECIES
  -SOLID
  -TELESTOMP
//+NEVERFAST
  +QUICKTORETALIATE
  +MTHRUSPECIES
  +NOBLOCKMONST
  +LOOKALLAROUND
  +MISSILEMORE
  +MISSILEEVENMORE
  PainSound ""
  DeathSound "greed/sbad"
  Obituary "%o was milked by a cow!"
  BloodType "SamsaraBloodyHellBlood"
  Species "Clone"
  DamageFactor "IPOGTimeBomb", 0
  DamageFactor "IPOGGrenade", 0
  DamageFactor "C7Explosion", 0
  DamageFactor "PGFire", 0
  DamageFactor "PGExplosive", 0
  DamageFactor "PGPlasma", 0	
  States
  {		
	Spawn:
		GPL0 CCCC 1 A_Wander
		GPL0 A 0 A_Look
		GPL0 BBBB 1 A_Wander
		GPL0 A 0 A_Look
		GPL0 AAAA 1 A_Wander
		GPL0 A 0 A_Look
		GPL0 BBBB 1 A_Wander
		GPL0 A 0 A_Look
		Loop	
	See:
		//GPL0 A 0 A_ClearTarget
		GPL0 A 0 A_JumpIfCloser(512, "SeeMoveAway")
	SeeNormal:
		TNT1 A 0 A_ChangeFlag("FRIGHTENED", 0)
		GPL0 CCCCBBBBAAAABBBB 1 A_Chase
		Loop
	SeeMoveAway:
		TNT1 A 0 A_ChangeFlag("FRIGHTENED", 1)
		GPL0 A 0 A_CheckSight("SeeNormal")
		GPL0 CCCCBBBBAAAABBBB 1 A_Chase
		Loop
	Missile:
		GPL0 D 0 A_FaceTarget
		GPL0 D 0 bright A_PlayWeaponSound("greed/laser")
		GPL0 D 0 bright A_CustomMissile("PGLaserBeam",46,-8, 0, 1)
		GPL0 E 3 bright A_CustomMissile("PGLaserBeam",46,8, 0, 1)
		GPL0 D 5 A_SentinelRefire
		Loop
	Pain:
		GPL0 F 2
		GPL0 F 6 A_Pain
		goto Spawn
    XDeath:
    Death:
		GPL0 G 5 
		GPL0 H 5 A_Scream
		GPL0 IJKLM 5
		GPL0 N -1
		stop
  }
}

Actor IPOGCloneFlameBallComp
{
	Radius 6
	Height 10
	Speed 30
	PROJECTILE
	+NOEXTREMEDEATH
	Damage (40)
	renderstyle add
	DamageType "IPOGPlasma"
	Species "Clone"
	+THRUSPECIES
	states
	{
	Spawn:
		GP30 A 3 bright
		loop
	Death:
		TNT1 A 5 A_SpawnItemEx("PGFireBallPuff",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
		stop
	}
}

Actor MoomanCloneCOOP : MoomanCloneCOMP
{
	Species "Player"
	+MTHRUSPECIES
	States
	{
		Missile:
			GPL0 D 0 A_FaceTarget
			GPL0 D 0 bright A_PlayWeaponSound("greed/laser")
			GPL0 D 0 bright A_CustomMissile("PGLaserBeamCoop",46,-8, 0, 1)
			GPL0 D 3 bright A_CustomMissile("PGLaserBeamCoop",46,8, 0, 1)
			GPL0 D 5 A_SentinelRefire
			Loop
	}
}

Actor IPOGCloneFlameBallCoop : IPOGCloneFlameBallComp { Species "Player" +THRUSPECIES }

Actor IPOGReversoPill : CustomInventory
{
  Inventory.Amount 1
  Inventory.MaxAmount 1
  Inventory.PickupSound "greed/pickup"
  Inventory.PickupMessage "You picked up a Reverso Pill!"
  -INVENTORY.AUTOACTIVATE
  +INVENTORY.FANCYPICKUPSOUND
  +INVENTORY.INVBAR
  +INVENTORY.PICKUPFLASH
  +COUNTITEM
  +FLOATBOB
  +NOGRAVITY
  Inventory.Icon "IREVZ0"
  Tag "ReversoPill: all damage taken is converted into Health and Armor for 20 seconds"
  States
  {
  Spawn:
    IREV X 1 Bright
    Loop
  Use:
    TNT1 A 0 A_JumpIfInventory("ReversoPillGain", 1, "UseFail")
	TNT1 A 0 A_PlaySound("greed/sgood",CHAN_VOICE)	
    TNT1 A 0 A_GiveInventory("ReversoPillPower", 1)
	TNT1 A 0 A_GiveInventory("ReversoPillProtection", 1)
    TNT1 A 0 ACS_NamedExecuteAlways("GreedScript")
    Stop
  UseCheck:
    TNT1 A 0 A_GiveInventory("ReversoPillPower", 1)
    Stop
  UseFail:
	TNT1 A 0
	Fail
  }
}

ACTOR ReversoPillGain : Powerup { PowerUp.Color "00 7F FF" 0.15 PowerUp.Duration -20 }

ACTOR ReversoPillPower : PowerupGiver
{
  Inventory.MaxAmount 0
  Powerup.Type "ReversoPillGain"
  +INVENTORY.ALWAYSPICKUP
  +INVENTORY.AUTOACTIVATE
}

Actor ReversoPillProtection : PowerProtection
{
  PowerUp.Duration -20
  RadiusDamageFactor 0.0
  DamageFactor "PGExplosive", 0
}

Actor IPOGExplosionEffect
{
	States
	{
	Spawn:
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,0,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",64,0,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,64,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-64,0,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,-64,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,48,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,-48,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,48,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,-48,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)

		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,0,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",64,0,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,64,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-64,0,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,-64,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,48,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,-48,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,48,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,-48,64,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,0,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",64,0,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,64,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-64,0,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,-64,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,48,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",48,-48,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,48,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-48,-48,-16,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)

		TNT1 A 2
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",128,0,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,128,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-128,0,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",0,-128,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",80,80,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",80,-80,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-80,80,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		TNT1 A 0 A_SpawnItemEx("PGRocketPuff",-80,-80,24,0,0,0,0,SXF_NOCHECKPOSITION|SXF_CLIENTSIDE)
		Stop
	}
}