/*
AMMO NOTES

* IP Freely can not be balanced by regular ammo limits all other classes have, thus we introduce a new method.
* I guess that doesn't have any issues since ammos are all given through custominventories and you do pick em up all the time anyway.

- Clips give 1-5 drunk missile ammo.
- Shells give 5-15 bazooka ammo.
- Rockets give 1-5 firebomb ammo.
- Cells give 20-60 split missile ammo and 1-5 flamewall ammo
*/

// These are used for DECORATE and ACS' inventory giving functions to prevent amount oddities.
actor Ammo1IgnoreSkill : Clip { +IGNORESKILL }
actor Ammo2IgnoreSkill : Shell { +IGNORESKILL }
actor Ammo3IgnoreSkill : RocketAmmo { +IGNORESKILL }
actor Ammo4IgnoreSkill : Cell { +IGNORESKILL }

// Ammo Pickup Base
actor SamsaraAmmoPickup : CustomInventory
{
    +NOTIMEFREEZE // allow the checks and sprite to process during time freeze
    +QUIET
    +THRUACTORS // don't allow picking up until the checks are done
    States
    {
      // Spawn code
      Spawn:
        TNT1 A 0
      SpawnGameModeCheck:
        TNT1 A 0 A_JumpIf(CallACS("SamsaraDecorate", 19), "SpawnNothing") // Prevent spawning in LMS
        TNT1 A 0 A_JumpIf(CallACS("SamsaraDecorate", 29), "SpawnNothing") // Prevent spawning in instagib
      SpawnActualInit:
        TNT1 A 1 A_Jump(256,"SpawnActual")
        loop

      SpawnActual:
        TNT1 A 0
        stop

      SpawnNothing:
        TNT1 A 0 A_ChangeFlag("COUNTITEM",false)
        stop

      // Pickup code
      Pickup:
        TNT1 A 0
        fail

      PickupFail:
        TNT1 A 0
        fail

      PickupStop:
        TNT1 A 0
        stop
    }
}

actor SamsaraAmmoPickupBlend : Trigger
{
    States
    {
      Pickup:
        TNT1 A 0 A_JumpIfInventory("PickupFlashesAreDisabled",1,"PickupStop")
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupMarathon")
        TNT1 A 0 A_SetBlend("D7BA45",0.3,4)
        stop

      PickupMarathon:
        TNT1 A 0 A_SetBlend("Green",0.3,3)
        stop
    }
}

// Small Ammo 1
actor Ammo1Small : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMSM A 0 Light("SAMSARA_SMALL_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo1Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM A 20 Light("SAMSARA_SMALL_AMMO_1")
        AMSM A 20 Bright Light("SAMSARA_SMALL_AMMO_1")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupQuake2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupFail")
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorHiFreq",0,"PickupFail")
        goto PickupDisplay

      PickupRedneck:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("MotoGunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake2:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q2Flechettes",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FlamerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo1",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3ChaingunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupSuccessRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupSuccessQuake2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("LavaNails",3)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",3)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",12)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",4)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",10)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",5)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",1)
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",4)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",4)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",5)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",10)
        stop
    }
}

actor Ammo1SmallGem : Ammo1Small
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM G 0 Light("SAMSARA_HERETIC_SMALL_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo1SmallGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM G 20 Light("SAMSARA_HERETIC_SMALL_AMMO_1")
        AMSM G 20 Bright Light("SAMSARA_HERETIC_SMALL_AMMO_1")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo1Small : Ammo1Small replaces Clip {}
actor DoomAmmo1SmallReplacingPistol : Ammo1Small replaces Pistol {} // replace pistol weapons with some ammo 1, to avoid weird troubles
actor ChexAmmo1Small : Ammo1Small replaces MiniZorchRecharge {}
actor ChexAmmo1SmallReplacingMiniZorcher : Ammo1Small replaces MiniZorcher {}
actor HereticAmmo1Small : Ammo1SmallGem replaces BlasterAmmo {}
actor HereticAmmo1SmallReplacingGoldWand : Ammo1SmallGem replaces GoldWand {}
actor StrifeAmmo1Small : Ammo1Small replaces ClipOfBullets {}

actor StrifeAmmo1Small_Conv : Ammo1Small // hack
{
    ConversationID 179
    +FLOORCLIP
    States
    {
      Spawn:
        BLIT A 0
        BLIT A 0 A_SpawnItemEx("StrifeAcolyteDrop",0,0,0,velx,vely,velz)
        stop
    }
}

actor MultiAmmo1Small : Ammo1Small
{
    States
    {
      Spawn:
        AMSM A 0 Light("SAMSARA_SMALL_AMMO_1")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo1SmallGem : Ammo1SmallGem
{
    States
    {
      Spawn:
        AMSM G 0 Light("SAMSARA_HERETIC_SMALL_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Medium Ammo 1
actor Ammo1Medium : Ammo1Small
{
    States
    {
      Spawn:
        AMMD A 0 Light("SAMSARA_MEDIUM_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo1Medium",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMD A 20 Light("SAMSARA_MEDIUM_AMMO_1")
        AMMD A 20 Bright Light("SAMSARA_MEDIUM_AMMO_1")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 1, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletmedium",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",30)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("LavaNails",10)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",9)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",36)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",12)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",30)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",15)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",3)
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(3,4))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",12)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",12)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",15)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",30)
        stop
    }
}

actor MultiAmmo1Medium : Ammo1Medium
{
    States
    {
      Spawn:
        AMMD A 0 Light("SAMSARA_MEDIUM_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Large Ammo 1
actor Ammo1Big : Ammo1Small
{
    States
    {
      Spawn:
        AMMB A 0 Light("SAMSARA_LARGE_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo1Big",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB A 20 Light("SAMSARA_LARGE_AMMO_1")
        AMMB A 20 Bright Light("SAMSARA_LARGE_AMMO_1")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        goto Super::Pickup // all other classes still checked

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        goto PickupDefault

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64DumDums",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 2, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",50)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Duke64DumDums",6)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("LavaNails",17)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",15)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",60)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",20)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",50)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",25)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",random(4,6))
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(4,6))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",20)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",20)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",25)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",50)
        stop
    }
}

actor Ammo1BigGem : Ammo1Big
{
    +FLOATBOB
    States
    {
      Spawn:
        AMMB F 0 Light("SAMSARA_HERETIC_LARGE_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo1BigGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB F 20 Light("SAMSARA_HERETIC_LARGE_AMMO_1")
        AMMB F 20 Bright Light("SAMSARA_HERETIC_LARGE_AMMO_1")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 2, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/bulletbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo1Big : Ammo1Big replaces ClipBox {}
actor ChexAmmo1Big : Ammo1Big replaces MiniZorchPack {}
actor HereticAmmo1Big : Ammo1BigGem replaces BlasterHefty {}
actor StrifeAmmo1Big : Ammo1Big replaces BoxOfBullets { ConversationID 180 }

actor MultiAmmo1Big : Ammo1Big
{
    States
    {
      Spawn:
        AMMB A 0 Light("SAMSARA_LARGE_AMMO_1")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo1BigGem : Ammo1BigGem
{
    States
    {
      Spawn:
        AMMB F 0 Light("SAMSARA_HERETIC_LARGE_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Small Ammo 2
actor Ammo2Small : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMSM B 0 Light("SAMSARA_SMALL_AMMO_2")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo2Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM B 20 Light("SAMSARA_SMALL_AMMO_2")
        AMSM B 20 Bright Light("SAMSARA_SMALL_AMMO_2")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupGoldenEye")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupDescent")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        goto PickupDefault

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        goto PickupDisplay

      PickupShadowWarrior:
        goto PickupQuake1

      PickupHexen2:
        goto PickupHexen1

      PickupGoldenEye:
        goto PickupDisruptor

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo2",0,"PickupFail")
        goto PickupDisplay

      PickupDescent:
        goto PickupDisruptor

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 3, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupSuccessGoldenEye")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupSuccessDescent")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",4)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Shell",4)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("HSMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",3)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",4)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        stop

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",4)
        stop

      PickupSuccessShadowWarrior:
        goto PickupSuccessQuake1

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessGoldenEye:
        goto PickupSuccessDisruptor

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",1)
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Shell",4)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Shell",4)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Shell",4)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",2)
        stop

      PickupSuccessDescent:
        goto PickupSuccessDisruptor
    }
}

actor Ammo2SmallGem : Ammo2Small
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM H 0 Light("SAMSARA_HERETIC_SMALL_AMMO_2")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo2SmallGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM H 20 Light("SAMSARA_HERETIC_SMALL_AMMO_2")
        AMSM H 20 Bright Light("SAMSARA_HERETIC_SMALL_AMMO_2")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 3, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/shellsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo2Small : Ammo2Small replaces Shell {}
actor ChexAmmo2Small : Ammo2Small replaces LargeZorchRecharge {}
actor HereticAmmo2Small : Ammo2SmallGem replaces CrossbowAmmo {}

actor MultiAmmo2Small : Ammo2Small
{
    States
    {
      Spawn:
        AMSM B 0 Light("SAMSARA_SMALL_AMMO_2")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo2SmallGem : Ammo2SmallGem
{
    States
    {
      Spawn:
        AMSM H 0 Light("SAMSARA_HERETIC_SMALL_AMMO_2")
        goto SpawnGameModeCheck
    }
}

// Medium Ammo 2
actor Ammo2Medium : Ammo2Small
{
    States
    {
      Spawn:
        AMMD B 0 Light("SAMSARA_MEDIUM_AMMO_2")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo2Medium",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMD B 20 Light("SAMSARA_MEDIUM_AMMO_2")
        AMMD B 20 Bright Light("SAMSARA_MEDIUM_AMMO_2")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        goto Super::Pickup // all other classes still checked

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FreezerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 4, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellmedium",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",12)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",60)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",60)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("RocketAmmo",3)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("HSMissiles",15)
        TNT1 A 0 A_GiveInventory("SMissiles",9)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",6)
        TNT1 A 0 A_GiveInventory("RocketAmmo",3)
        stop

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Shell",12)
        stop

      PickupSuccessShadowWarrior:
        goto PickupSuccessQuake1

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessGoldenEye:
        goto PickupSuccessDisruptor

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",3)
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",6)
        stop

      PickupSuccessDescent:
        goto PickupSuccessDisruptor
    }
}

actor StrifeAmmo2Medium : Ammo2Medium replaces ElectricBolts { ConversationID 186 }

actor MultiAmmo2Medium : Ammo2Medium
{
    States
    {
      Spawn:
        AMMD B 0 Light("SAMSARA_MEDIUM_AMMO_2")
        goto SpawnGameModeCheck
    }
}

// Large Ammo 2
actor Ammo2Big : Ammo2Small
{
    States
    {
      Spawn:
        AMMB B 0 Light("SAMSARA_LARGE_AMMO_2")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo2Big",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB B 20 Light("SAMSARA_LARGE_AMMO_2")
        AMMB B 20 Bright Light("SAMSARA_LARGE_AMMO_2")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        goto Super::Pickup // all other classes still checked

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        goto PickupDefault

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ExplosiveShells",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FreezerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 5, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",20)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",100)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",100)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",2)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("HSMissiles",20)
        TNT1 A 0 A_GiveInventory("SMissiles",15)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Shell",24)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",50)
        TNT1 A 0 A_GiveInventory("Shell",20)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        goto PickupSuccessQuake1

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessGoldenEye:
        goto PickupSuccessDisruptor

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(4,6))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(4,6))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Shell",20)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",10)
        stop

      PickupSuccessDescent:
        goto PickupSuccessDisruptor
    }
}

actor Ammo2BigGem : Ammo2Big
{
    +FLOATBOB
    States
    {
      Spawn:
        AMMB G 0 Light("SAMSARA_HERETIC_LARGE_AMMO_2")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo2BigGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB G 20 Light("SAMSARA_HERETIC_LARGE_AMMO_2")
        AMMB G 20 Bright Light("SAMSARA_HERETIC_LARGE_AMMO_2")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 5, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/shellbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo2Big : Ammo2Big replaces ShellBox {}
actor ChexAmmo2Big : Ammo2Big replaces LargeZorchPack {}
actor HereticAmmo2Big : Ammo2BigGem replaces CrossbowHefty {}
actor StrifeAmmo2Big : Ammo2Big replaces PoisonBolts { ConversationID 185 }

actor MultiAmmo2Big : Ammo2Big
{
    States
    {
      Spawn:
        AMMB B 0 Light("SAMSARA_LARGE_AMMO_2")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo2BigGem : Ammo2BigGem
{
    States
    {
      Spawn:
        AMMB G 0 Light("SAMSARA_HERETIC_LARGE_AMMO_2")
        goto SpawnGameModeCheck
    }
}

// Small Ammo 3
actor Ammo3Small : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMSM C 0 Light("SAMSARA_SMALL_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo3Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM C 20 Light("SAMSARA_SMALL_AMMO_3")
        AMSM C 20 Bright Light("SAMSARA_SMALL_AMMO_3")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupBlood")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrMines",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        goto PickupDefault

      PickupTotenkopf:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Totenkopf_FlameThrowerFuel",0,"PickupFail")
        goto PickupDisplay

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupFail")
        TNT1 A 0 A_JumpIfInventory("MultiRocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("FBMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupBlood:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SprayCanAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_HeaterAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo3",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3GrenadeLauncherAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 6, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupSuccessDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupSuccessBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",1)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        goto PickupSuccessDefault

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",12)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("RocketAmmo",3)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",1)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",1)
        TNT1 A 0 A_GiveInventory("DMMissiles",1)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",8)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",3)
        stop

      PickupSuccessShadowWarrior:
        goto PickupSuccessStrife

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",1)
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",5)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",5)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",1)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",2)
        stop
    }
}

actor Ammo3SmallGem : Ammo3Small
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM I 0 Light("SAMSARA_HERETIC_SMALL_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo3SmallGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM I 20 Light("SAMSARA_HERETIC_SMALL_AMMO_3")
        AMSM I 20 Bright Light("SAMSARA_HERETIC_SMALL_AMMO_3")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 6, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/rocketsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo3Small : Ammo3Small replaces RocketAmmo {}
actor ChexAmmo3Small : Ammo3Small replaces PropulsorZorch {}
actor HereticAmmo3Small : Ammo3SmallGem replaces PhoenixRodAmmo {}

actor MultiAmmo3Small : Ammo3Small
{
    States
    {
      Spawn:
        AMSM C 0 Light("SAMSARA_SMALL_AMMO_3")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo3SmallGem : Ammo3SmallGem
{
    States
    {
      Spawn:
        AMSM I 0 Light("SAMSARA_HERETIC_SMALL_AMMO_3")
        goto SpawnGameModeCheck
    }
}

// Medium Ammo 3
actor Ammo3Medium : Ammo3Small
{
    States
    {
      Spawn:
        AMMD C 0 Light("SAMSARA_MEDIUM_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo3Medium",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMD C 20 Light("SAMSARA_MEDIUM_AMMO_3")
        AMMD C 20 Bright Light("SAMSARA_MEDIUM_AMMO_3")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        goto Super::Pickup // all other classes still checked

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 7, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketmedium",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",1)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        goto PickupSuccessDefault

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",25)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",2)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",2)
        TNT1 A 0 A_GiveInventory("DMMissiles",2)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",16)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        stop

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",1)
        stop

      PickupSuccessShadowWarrior:
        goto PickupSuccessStrife

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",2)
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",15)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",15)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",2)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("RocketAmmo",4)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",4)
        stop
    }
}

actor StrifeAmmo3Medium : Ammo3Medium replaces HEGrenadeRounds { ConversationID 177 }

actor MultiAmmo3Medium : Ammo3Medium
{
    States
    {
      Spawn:
        AMMD C 0 Light("SAMSARA_MEDIUM_AMMO_3")
        goto SpawnGameModeCheck
    }
}

// Large Ammo 3
actor Ammo3Big : Ammo3Small
{
    States
    {
      Spawn:
        AMMB C 0 Light("SAMSARA_LARGE_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo3Big",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB C 20 Light("SAMSARA_LARGE_AMMO_3")
        AMMB C 20 Bright Light("SAMSARA_LARGE_AMMO_3")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        goto Super::Pickup // all other classes still checked

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        goto PickupDefault

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64HeatSeekingRockets",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 8, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",1)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        goto PickupSuccessDefault

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",37)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Duke64HeatSeekingRockets",3)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("RocketAmmo",9)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",3)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",4)
        TNT1 A 0 A_GiveInventory("DMMissiles",4)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("RocketAmmo",7)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",48)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",9)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",2)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",2)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",2)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        TNT1 A 0 A_GiveInventory("RocketAmmo",9)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(4,6))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",30)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",30)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",3)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",6)
        stop
    }
}

actor Ammo3BigGem : Ammo3Big
{
    +FLOATBOB
    States
    {
      Spawn:
        AMMB H 0 Light("SAMSARA_HERETIC_LARGE_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo3BigGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB H 20 Light("SAMSARA_HERETIC_LARGE_AMMO_3")
        AMMB H 20 Bright Light("SAMSARA_HERETIC_LARGE_AMMO_3")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 8, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/rocketbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo3Big : Ammo3Big replaces RocketBox {}
actor ChexAmmo3Big : Ammo3Big replaces PropulsorZorchPack {}
actor HereticAmmo3Big : Ammo3BigGem replaces PhoenixRodHefty {}
actor StrifeAmmo3Big : Ammo3Big replaces PhosphorusGrenadeRounds { ConversationID 178 }

actor MultiAmmo3Big : Ammo3Big
{
    States
    {
      Spawn:
        AMMB C 0 Light("SAMSARA_LARGE_AMMO_3")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo3BigGem : Ammo3BigGem
{
    States
    {
      Spawn:
        AMMB H 0 Light("SAMSARA_HERETIC_LARGE_AMMO_3")
        goto SpawnGameModeCheck
    }
}

// Small Ammo 4
actor Ammo4Small : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMSM D 0 Light("SAMSARA_SMALL_AMMO_4")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo4Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM D 20 Light("SAMSARA_SMALL_AMMO_4")
        AMSM D 20 Bright Light("SAMSARA_SMALL_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoom")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrGas",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        goto PickupDefault

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_ElectroAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo4",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 9, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmasmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupSuccessDoom")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Cell",20)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",12)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Cell",20)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",5)
        stop

      PickupSuccessDuke64:
        goto PickupSuccessDefault

      PickupSuccessQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",10)
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Cell",24)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(1,2))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Cell",20)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",15)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Cell",20)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",15)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Cell",20)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",10)
        stop
    }
}

actor Ammo4SmallGem : Ammo4Small
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM J 0 Light("SAMSARA_HERETIC_SMALL_AMMO_4")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo4SmallGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM J 20 Light("SAMSARA_HERETIC_SMALL_AMMO_4")
        AMSM J 20 Bright Light("SAMSARA_HERETIC_SMALL_AMMO_4")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 9, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/plasmasmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo4Small : Ammo4Small replaces Cell {}
actor ChexAmmo4Small : Ammo4Small replaces PhasingZorch {}
actor HereticAmmo4Small : Ammo4SmallGem replaces SkullRodAmmo {}
actor StrifeAmmo4Small : Ammo4Small replaces EnergyPod {}

actor StrifeAmmo4Small_Conv : Ammo4Small // hack
{
    ConversationID 183
    +FLOORCLIP
    States
    {
      Spawn:
        BRY1 A 0
        BRY1 A 0 A_SpawnItemEx("StrifeEnergyPod2",0,0,0,velx,vely,velz)
        stop
    }
}

actor MultiAmmo4Small : Ammo4Small
{
    States
    {
      Spawn:
        AMSM D 0 Light("SAMSARA_SMALL_AMMO_4")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo4SmallGem : Ammo4SmallGem
{
    States
    {
      Spawn:
        AMSM J 0 Light("SAMSARA_HERETIC_SMALL_AMMO_4")
        goto SpawnGameModeCheck
    }
}

// Medium Ammo 4
actor Ammo4Medium : Ammo4Small
{
    States
    {
      Spawn:
        AMMD D 0 Light("SAMSARA_MEDIUM_AMMO_4")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo4Medium",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMD D 20 Light("SAMSARA_MEDIUM_AMMO_4")
        AMMD D 20 Bright Light("SAMSARA_MEDIUM_AMMO_4")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 10, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmamedium",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",60)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Cell",60)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",24)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Cell",60)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",10)
        stop

      PickupSuccessDuke64:
        goto PickupSuccessDefault

      PickupSuccessQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",30)
        TNT1 A 0 A_GiveInventory("Cell",60)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("DMissiles",15)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Cell",72)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(3,4))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Cell",60)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",45)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Cell",60)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",45)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Cell",60)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",30)
        stop
    }
}

actor MultiAmmo4Medium : Ammo4Medium
{
    States
    {
      Spawn:
        AMMD D 0 Light("SAMSARA_MEDIUM_AMMO_4")
        goto SpawnGameModeCheck
    }
}

// Large Ammo 4
actor Ammo4Big : Ammo4Small
{
    States
    {
      Spawn:
        AMMB D 0 Light("SAMSARA_LARGE_AMMO_4")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo4Big",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB D 20 Light("SAMSARA_LARGE_AMMO_4")
        AMMB D 20 Bright Light("SAMSARA_LARGE_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupGoldenEye")
        goto Super::Pickup // all other classes still checked

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ShrinkerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ShrinkerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupFail")
        TNT1 A 0 A_JumpIfInventory("PlasmaCell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("FWMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupGoldenEye:
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Goldeneye_GoldenGunRounds",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 11, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmabig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupSuccessGoldenEye")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",100)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",48)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("ShrinkerAmmo",3)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",20)
        stop

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("Duke64ShrinkerAmmo",2)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",50)
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("PlasmaCell",1)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("DMissiles",30)
        TNT1 A 0 A_GiveInventory("FWMissiles",1)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Cell",120)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessGoldenEye:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("Goldeneye_GoldenGunRounds",5)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(4,6))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",75)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",75)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Cell",100)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",50)
        stop
    }
}

actor Ammo4BigGem : Ammo4Big
{
    +FLOATBOB
    States
    {
      Spawn:
        AMMB I 0 Light("SAMSARA_HERETIC_LARGE_AMMO_4")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo4BigGem",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB I 20 Light("SAMSARA_HERETIC_LARGE_AMMO_4")
        AMMB I 20 Bright Light("SAMSARA_HERETIC_LARGE_AMMO_4")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 11, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/plasmabig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess
    }
}

actor DoomAmmo4Big : Ammo4Big replaces CellPack {}
actor ChexAmmo4Big : Ammo4Big replaces PhasingZorchPack {}
actor HereticAmmo4Big : Ammo4BigGem replaces SkullRodHefty {}
actor StrifeAmmo4Big : Ammo4Big replaces EnergyPack { ConversationID 184 }

actor MultiAmmo4Big : Ammo4Big
{
    States
    {
      Spawn:
        AMMB D 0 Light("SAMSARA_LARGE_AMMO_4")
        goto SpawnGameModeCheck
    }
}

actor MultiAmmo4BigGem : Ammo4BigGem
{
    States
    {
      Spawn:
        AMMB I 0 Light("SAMSARA_HERETIC_LARGE_AMMO_4")
        goto SpawnGameModeCheck
    }
}

// Ammo Expansion Pack
actor AmmoBackpack : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMPK A 0 Light("SAMSARA_AMMO_BACKPACK") NoDelay ACS_NamedExecuteWithResult("Samsara_SwitchableObject", 13)
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMPK A 20 Light("SAMSARA_AMMO_BACKPACK")
        AMPK A 20 Bright Light("SAMSARA_AMMO_BACKPACK")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        goto PickupDisplay

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("PortKraterOfMight",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        TNT1 A 0 A_JumpIfInventory("PortKraterOfMight2",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_JumpIfInventory("ChexClass",1,"PickupDisplayChex")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupDisplayWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupDisplayHexen1")
        TNT1 A 0 A_JumpIfInventory("MarathonClass",1,"PickupDisplayMarathon")
        TNT1 A 0 A_JumpIfInventory("KatarnClass",1,"PickupDisplayDarkForces")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupDisplayHexen2")
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupDisplayGoldenEye")
        TNT1 A 0 A_JumpIfInventory("UnrealClass",1,"PickupDisplayUnreal")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupDisplayQuake3")
        TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupDisplayDescent")
        TNT1 A 0 A_JumpIfInventory("DeusExClass",1,"PickupDisplayDeusEx")
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/backpack",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupDisplayChex:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("chex/weaponget",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 0)
        goto PickupSuccess

      PickupDisplayWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupDisplayTotenkopf")
        goto PickupDisplayDefault

      PickupDisplayTotenkopf:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("totenkopf/getweapon",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 1)
        goto PickupSuccess

      PickupDisplayHexen1:
        TNT1 A 0 A_JumpIfInventory("HexenClassMode",2,2)
        TNT1 A 0 A_JumpIfInventory("HexenClassMode",1,"PickupDisplayHexen1ClericClassic")
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("hexen/artiget",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupDisplayHexen1ClericClassic:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 1)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("hexen/weaponget",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 2)
        goto PickupSuccess

      PickupDisplayMarathon:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("marathon/itemget",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 3)
        goto PickupSuccess

      PickupDisplayDarkForces:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("katarn/itemup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 4)
        goto PickupSuccess

      PickupDisplayHexen2:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, random(2,3))
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("Hexen2/ArtifactPickup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupDisplayGoldenEye:
        TNT1 A 0 A_JumpIfInventory("Goldeneye_PlayerAltClassToken",1,"PickupDisplayGoldfinger")
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("Goldeneye/Weaponup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 5)
        goto PickupSuccess

      PickupDisplayGoldfinger:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("Goldeneye/Weaponup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 6)
        goto PickupSuccess

      PickupDisplayUnreal:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("Unreal/WeaponPickup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 7)
        goto PickupSuccess

      PickupDisplayQuake3:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 4)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 ACS_NamedExecuteAlways("Q3_Announcer", 0, 5) //A_PlaySound("Quake3/Items/AmmoRegeneration",CHAN_6)
        goto PickupSuccess

      PickupDisplayDescent:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("Descent/Item/Pickup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 8)
        goto PickupSuccess

      PickupDisplayDeusEx:
        //TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        //TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        //TNT1 A 0 A_PlaySound("DeusEx/WeaponPickup",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraBackpackPickupDisplayHexenHack", 9)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 ACS_NamedExecuteWithResult("Samsara_GiveBackpack", 0)
        stop
    }
}

actor AmmoBackpackGem : AmmoBackpack
{
    States
    {
      Spawn:
        AMPK B 0 Light("SAMSARA_AMMO_BACKPACK") NoDelay ACS_NamedExecuteWithResult("Samsara_SwitchableObject", 13)
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMPK B 20 Light("SAMSARA_AMMO_BACKPACK")
        AMPK B 20 Bright Light("SAMSARA_AMMO_BACKPACK")
        loop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 12, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/backpack",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupDisplayWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupDisplayTotenkopf")
        goto PickupDisplayDefault
    }
}

actor DoomAmmoBackpack : AmmoBackpack replaces Backpack {}
actor ChexAmmoBackpack : AmmoBackpack replaces Zorchpack {}
actor HereticAmmoBackpack : AmmoBackpackGem replaces BagOfHolding {}
actor HexenAmmoBackpack : AmmoBackpackGem replaces ArtiBoostMana {}
actor HexenAmmoBackpack2 : AmmoBackpackGem replaces MWeaponPiece1 {}
actor HexenAmmoBackpack3 : AmmoBackpackGem replaces MWeapLightning {}
actor StrifeAmmoBackpack : AmmoBackpack replaces AmmoSatchel { ConversationID 187 }

actor SamsaraAmmoBackpackInventory : CustomInventory
{
    Inventory.UseSound ""
    +INVBAR
    +UNDROPPABLE
    States
    {
      Use:
        TNT1 A 0 A_Jump(256,"UseDefault") // for inheriting actors
        goto UseDefault

      UseDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto UsePlaySound
        TNT1 A 0 A_JumpIfInventory("Cell",0,"UseFail")
        goto UsePlaySound

      UsePlaySound:
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"UsePlaySoundHexen1")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"UsePlaySoundHexen2")
        TNT1 A 0 A_Jump(256,"UsePlaySoundDefault") // for inheriting actors
        goto UsePlaySoundDefault

      UsePlaySoundDefault:
        goto UseSuccess

      UsePlaySoundHexen1:
        TNT1 A 0 A_PlaySound("hexen/artiuse",CHAN_ITEM)
        goto UseSuccess

      UsePlaySoundHexen2:
        TNT1 A 0 A_PlaySound("Hexen2/ArtiUse",CHAN_ITEM)
        goto UseSuccess

      UseSuccess:
        TNT1 A 0 A_Jump(256,"UseSuccessDefault") // for inheriting actors
        goto UseSuccessDefault

      UseSuccessDefault:
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraHexenAmmoRefill", 0)
        TNT1 A 0 ACS_NamedExecuteWithResult("SamsaraHexenAmmoRefill", 1)
        goto UseFinish

      UseFinish:
        TNT1 A 0 A_RailWait
        stop

      UseFail:
        TNT1 A 0
        fail
    }
}

actor PortKraterOfMight : SamsaraAmmoBackpackInventory
{
    Inventory.Icon "ARTIBMAN"
    Inventory.MaxAmount 3
    Inventory.InterHubAmount 3
    Inventory.RestrictedTo "HexenPlayer"
    Tag "Krater of Might"
}

actor PortKraterOfMight2 : SamsaraAmmoBackpackInventory
{
    Inventory.Icon "H2INVT06"
    Inventory.MaxAmount 3
    Inventory.InterHubAmount 3
    Inventory.RestrictedTo "Demoness"
    Tag "Krater of Might"
}

// Ammo 1/2
actor Ammo12Small : SamsaraAmmoPickup
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM E 0 Light("SAMSARA_HEXEN_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo12Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM E 20 Light("SAMSARA_HEXEN_AMMO_1")
        AMSM E 20 Bright Light("SAMSARA_HEXEN_AMMO_2")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupDescent")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        goto PickupDefault

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        goto PickupDefault

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64DumDums",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ExplosiveShells",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorHiFreq",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        goto PickupDisplay

      PickupShadowWarrior:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRedneck:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("MotoGunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake2:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q2Flechettes",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FlamerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FreezerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo1",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo2",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3ChaingunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDescent:
        goto PickupShadowWarrior

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 13, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/mana1",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupSuccessRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupSuccessQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_JumpIfInventory("DescentClass",1,"PickupSuccessDescent")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Duke64DumDums",1)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",1)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",5)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",5)
        TNT1 A 0 A_GiveInventory("HSMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",5)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",12)
        TNT1 A 0 A_GiveInventory("Shell",12)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",5)
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",4)
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",10)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",5)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",random(2,3))
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(2,3))
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(2,3))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(2,3))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",5)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",1)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",5)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",1)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",5)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",5)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",10)
        stop

      PickupSuccessDescent:
        goto PickupSuccessShadowWarrior
    }
}

actor HexenAmmo12Small : Ammo12Small replaces Mana1 {}

actor MultiAmmo12Small : Ammo12Small
{
    States
    {
      Spawn:
        AMSM E 0 Light("SAMSARA_HEXEN_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Ammo 3/4
actor Ammo34Small : SamsaraAmmoPickup
{
    +FLOATBOB
    States
    {
      Spawn:
        AMSM F 0 Light("SAMSARA_HEXEN_AMMO_3")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmo34Small",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM F 20 Light("SAMSARA_HEXEN_AMMO_3")
        AMSM F 20 Bright Light("SAMSARA_HEXEN_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrMines",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DoomguyStrGas",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        goto PickupDefault

      PickupTotenkopf:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Totenkopf_FlameThrowerFuel",0,"PickupFail")
        goto PickupDisplay

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ShrinkerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64HeatSeekingRockets",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ShrinkerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("MultiRocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("FBMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupBlood:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SprayCanAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_HeaterAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_ElectroAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo3",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo4",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3GrenadeLauncherAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 14, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/mana2",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupSuccessDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupSuccessBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",1)
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",12)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        goto PickupSuccessDefault

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",37)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("ShrinkerAmmo",1)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",5)
        stop

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Duke64HeatSeekingRockets",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Duke64ShrinkerAmmo",1)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",5)
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",2)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",1)
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        TNT1 A 0 A_GiveInventory("DMMissiles",1)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("RocketAmmo",6)
        TNT1 A 0 A_GiveInventory("Cell",12)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",24)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",1)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(2,3))
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(2,3))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",20)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",20)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",20)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",20)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",2)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",5)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",5)
        stop
    }
}

actor HexenAmmo34Small : Ammo34Small replaces Mana2 {}

actor MultiAmmo34Small : Ammo34Small
{
    States
    {
      Spawn:
        AMSM F 0 Light("SAMSARA_HEXEN_AMMO_3")
        goto SpawnGameModeCheck
    }
}

// All Ammo
actor EverythingAmmo : SamsaraAmmoPickup
{
    Scale 0.75
    +FLOATBOB
    States
    {
      Spawn:
        AMMB E 0 Light("SAMSARA_HEXEN_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiEverythingAmmo",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB E 10 Light("SAMSARA_HEXEN_AMMO_1")
        AMMB E 10 Light("SAMSARA_HEXEN_AMMO_2")
        AMMB E 10 Bright Light("SAMSARA_HEXEN_AMMO_3")
        AMMB E 10 Bright Light("SAMSARA_HEXEN_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupGoldenEye")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrMines",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DoomguyStrGas",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Totenkopf_FlameThrowerFuel",0,"PickupFail")
        goto PickupDisplay

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ShrinkerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64DumDums",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ExplosiveShells",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64HeatSeekingRockets",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ShrinkerAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("MultiRocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupFail")
        TNT1 A 0 A_JumpIfInventory("PlasmaCell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("FBMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("FWMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupBlood:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SprayCanAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorHiFreq",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupRedneck:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("MotoGunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake2:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q2Flechettes",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupGoldenEye:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Goldeneye_GoldenGunRounds",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FlamerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FreezerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_HeaterAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_ElectroAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo1",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo2",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo3",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo4",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3ChaingunAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3GrenadeLauncherAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 15, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammogem/mana3",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupSuccessDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupSuccessBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupSuccessRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupSuccessQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("BondClass",1,"PickupSuccessGoldenEye")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",2)
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",24)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",45)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",50)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",30)
        TNT1 A 0 A_GiveInventory("Cell",30)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("ShrinkerAmmo",1)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",5)
        stop

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Duke64DumDums",2)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Duke64HeatSeekingRockets",2)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Duke64ShrinkerAmmo",1)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("PlasmaCell",1)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",5)
        TNT1 A 0 A_GiveInventory("HSMissiles",5)
        TNT1 A 0 A_GiveInventory("FBMissiles",3)
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",5)
        TNT1 A 0 A_GiveInventory("DMMissiles",3)
        TNT1 A 0 A_GiveInventory("FWMissiles",1)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",18)
        TNT1 A 0 A_GiveInventory("Shell",18)
        TNT1 A 0 A_GiveInventory("RocketAmmo",18)
        TNT1 A 0 A_GiveInventory("Cell",18)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",48)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",5)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",5)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",5)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",20)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",15)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",10)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessGoldenEye:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Goldeneye_GoldenGunRounds",5)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(3,4))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(3,4))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",10)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",30)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",30)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",10)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",30)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",30)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",7)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",7)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",7)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",7)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",15)
        TNT1 A 0 A_GiveInventory("Shell",15)
        TNT1 A 0 A_GiveInventory("RocketAmmo",15)
        TNT1 A 0 A_GiveInventory("Cell",15)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",15)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",15)
        stop
    }
}

actor HexenEverythingAmmo : EverythingAmmo replaces Mana3 {}

actor MultiEverythingAmmo : EverythingAmmo
{
    States
    {
      Spawn:
        AMMB E 0 Light("SAMSARA_HEXEN_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Small Ammo Combo
actor AmmoComboSmall : SamsaraAmmoPickup
{
    States
    {
      Spawn:
        AMSM M 0 Light("SAMSARA_SMALL_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmoComboSmall",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMSM M 10 Light("SAMSARA_SMALL_AMMO_1")
        AMSM M 10 Light("SAMSARA_SMALL_AMMO_2")
        AMSM M 10 Bright Light("SAMSARA_SMALL_AMMO_3")
        AMSM M 10 Bright Light("SAMSARA_SMALL_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupQuake3")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrGas",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        goto PickupDefault

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64DumDums",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ExplosiveShells",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorHiFreq",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupShadowWarrior:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupRedneck:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("MotoGunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake2:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q2Flechettes",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FlamerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_ElectroAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo1",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo2",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo4",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3ChaingunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 15, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/combosmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("DoomguyClass",1,"PickupSuccessDoom")
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("DukeClass",1,"PickupSuccessDuke")
        TNT1 A 0 A_JumpIfInventory("QuakeClass",1,"PickupSuccessQuake1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("BlakeClass",1,"PickupSuccessBlake")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("C7Class",1,"PickupSuccessCorridor7")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("WitchavenClass",1,"PickupSuccessWitchaven")
        TNT1 A 0 A_JumpIfInventory("SWClass",1,"PickupSuccessShadowWarrior")
        TNT1 A 0 A_JumpIfInventory("RRClass",1,"PickupSuccessRedneck")
        TNT1 A 0 A_JumpIfInventory("BittermanClass",1,"PickupSuccessQuake2")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_JumpIfInventory("PainkillerClass",1,"PickupSuccessPainkiller")
        TNT1 A 0 A_JumpIfInventory("RTCWClass",1,"PickupSuccessRTCW")
        TNT1 A 0 A_JumpIfInventory("Q3Class",1,"PickupSuccessQuake3")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",12)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",10)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",1)
        stop

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Duke64DumDums",1)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",1)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",2)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",2)
        TNT1 A 0 A_GiveInventory("HSMissiles",2)
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",3)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",6)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",2)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",4)
        stop

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",5)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",4)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(1,2))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",5)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",5)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",2)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",1)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",2)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",5)
        TNT1 A 0 A_GiveInventory("Shell",2)
        TNT1 A 0 A_GiveInventory("Cell",4)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",5)
        stop
    }
}

actor StrifeAmmoComboSmall : AmmoComboSmall replaces MiniMissiles { ConversationID 181 }

actor MultiAmmoComboSmall : AmmoComboSmall
{
    States
    {
      Spawn:
        AMSM M 0 Light("SAMSARA_SMALL_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Large Ammo Combo
actor AmmoComboBig : AmmoComboSmall
{
    States
    {
      Spawn:
        AMMB J 0 Light("SAMSARA_LARGE_AMMO_1")
        TNT1 A 6 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 21)
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnMultiplyAmmo:
        TNT1 A 0 A_TakeInventory("MultiplyToken",1)
        TNT1 A 1 A_SpawnItemEx("MultiAmmoComboBig",0,0,0,random(-1,1),random(-1,1),0,0,SXF_ABSOLUTEVELOCITY|SXF_NOCHECKPOSITION)
        TNT1 A 0 A_JumpIfInventory("MultiplyToken",1,"SpawnMultiplyAmmo")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMMB J 10 Light("SAMSARA_LARGE_AMMO_1")
        AMMB J 10 Light("SAMSARA_LARGE_AMMO_2")
        AMMB J 10 Bright Light("SAMSARA_LARGE_AMMO_3")
        AMMB J 10 Bright Light("SAMSARA_LARGE_AMMO_4")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupBlood")
        goto Super::Pickup // all other classes still checked

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupStronghold")
        goto PickupDefault

      PickupStronghold:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        goto PickupFail
        TNT1 A 0 A_JumpIfInventory("DoomguyStrMines",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DoomguyStrGas",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Totenkopf_FlameThrowerFuel",0,"PickupFail")
        goto PickupDisplay

      PickupDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupDuke64")
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("ExpanderAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDuke64:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64DumDums",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64ExplosiveShells",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Duke64HeatSeekingRockets",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupQuake1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("LavaNails",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_JumpIfInventory("MultiRocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupFail")
        TNT1 A 0 A_JumpIfInventory("PlasmaCell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("FBMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("FWMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupBlood:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SprayCanAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorHiFreq",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupRedneck:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("MotoGunAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupQuake2:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q2Flechettes",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupPainkiller:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FlamerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_FreezerAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_HeaterAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Painkiller_ElectroAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupRTCW:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo1",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo2",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo3",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RTCW_AlliedAmmo4",0,"PickupFail")
        goto PickupDisplay

      PickupQuake3:
        TNT1 A 0 A_JumpIfInventory("Clip",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Cell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3ChaingunAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Q3GrenadeLauncherAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 15, 2)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/combobig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupSuccessBlood")
        goto Super::PickupSuccess // all other classes still checked

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",1)
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",12)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",60)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",5)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",60)
        TNT1 A 0 A_GiveInventory("Cell",15)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",2)
        stop

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Duke64DumDums",2)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",2)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Duke64HeatSeekingRockets",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("PlasmaCell",1)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",5)
        TNT1 A 0 A_GiveInventory("HSMissiles",5)
        TNT1 A 0 A_GiveInventory("FBMissiles",3)
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",5)
        TNT1 A 0 A_GiveInventory("DMMissiles",3)
        TNT1 A 0 A_GiveInventory("FWMissiles",1)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Clip",24)
        TNT1 A 0 A_GiveInventory("Shell",12)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",12)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",12)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",5)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",1)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("DisruptorHiFreq",5)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        goto PickupSuccessDefault

      PickupSuccessRedneck:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("MotoGunAmmo",20)
        stop

      PickupSuccessQuake2:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Q2Flechettes",10)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(1,2))
        stop

      PickupSuccessPainkiller:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",1)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",5)
        TNT1 A 0 A_JumpIfInventory("Painkiller_Replenish_Power",1,"PickupSuccessPainkillerReplenish")
        stop

      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Painkiller_FlamerAmmo",10)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",1)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",5)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",5)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo1",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",5)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",1)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",5)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("Clip",20)
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",1)
        TNT1 A 0 A_GiveInventory("Cell",10)
        TNT1 A 0 A_GiveInventory("Q3ChaingunAmmo",20)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",1)
        stop
    }
}

actor StrifeAmmoComboBig : AmmoComboBig replaces CrateOfMissiles { ConversationID 182 }

actor MultiAmmoComboBig : AmmoComboBig
{
    States
    {
      Spawn:
        AMMB J 0 Light("SAMSARA_LARGE_AMMO_1")
        goto SpawnGameModeCheck
    }
}

// Enemy Ammo Drop Base
actor SamsaraEnemyAmmoPickup : SamsaraAmmoPickup
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
}

// Doom Enemy Ammo Drops
actor Clip2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        CLIP B 0
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        CLIP B -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",5)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",1)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",1)
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        stop
    }
}

// Heretic Enemy Ammo Drops
actor GoldWandAmmo2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        AMG1 A 0 Light("SWANDAMMO")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        AMG1 A -1 Light("SWANDAMMO") A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 2)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",3)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",1)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",1)
        stop
    }
}

actor BlasterAmmo2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        AMB1 A 0 Light("SCLAWAMMO")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMB1 ABC 4 Light("SCLAWAMMO")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 3)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",2)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",1)
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        stop
    }
}

actor CrossbowAmmo2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        AMC1 A 0 Light("ETHARROWS")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        AMC1 A -1 Light("ETHARROWS") A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Shell",0,"PickupFail")
        goto PickupDisplay

      PickupWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupTotenkopf")
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupTotenkopf:
        goto PickupDefault

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("HSMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("Shell",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifePoisonAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_XTerminators",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bursts",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 3, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("WolfenClass",1,"PickupSuccessWolfenstein")
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",5)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",10)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("HSMissiles",5)
        TNT1 A 0 A_GiveInventory("SMissiles",3)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",5)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",2)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(1,2))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",1)
        stop
    }
}

actor CrossbowAmmo3 : CrossbowAmmo2
{
    States
    {
      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 3, 2)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",20)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("HSMissiles",10)
        TNT1 A 0 A_GiveInventory("SMissiles",6)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",5)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_XTerminators",random(2,3))
        TNT1 A 0 A_GiveInventory("Catacomb_Bursts",random(2,3))
        stop
    }
}

actor PhoenixRodAmmo2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        AMP1 A 0 Light("SRODAMMO")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMP1 ABC 4 Light("SRODAMMO")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupHexen1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupDisruptor")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupHexen1:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("FBMissiles",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DMMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupBlood:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("SprayCanAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupStrife:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("WhitePhosGrenade",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("StrifeGasGrenadeAmmo",0,"PickupFail")
        goto PickupDisplay

      PickupDisruptor:
        TNT1 A 0 A_JumpIfInventory("RocketAmmo",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("DisruptorBinaryLockOn",0,"PickupFail")
        goto PickupDisplay

      PickupHexen2:
        goto PickupHexen1

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Nukes",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 6, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("HexenClass",1,"PickupSuccessHexen1")
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CalebClass",1,"PickupSuccessBlood")
        TNT1 A 0 A_JumpIfInventory("StrifeClass",1,"PickupSuccessStrife")
        TNT1 A 0 A_JumpIfInventory("DisruptorClass",1,"PickupSuccessDisruptor")
        TNT1 A 0 A_JumpIfInventory("Hexen2Class",1,"PickupSuccessHexen2")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",10)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",1)
        TNT1 A 0 A_GiveInventory("DMMissiles",1)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",48)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",1)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",1)
        stop

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",5)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",1)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(3,4))
        stop
    }
}

actor PhoenixRodAmmo3 : PhoenixRodAmmo2
{
    States
    {
      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 6, 2)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        stop

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("FBMissiles",2)
        TNT1 A 0 A_GiveInventory("DMMissiles",2)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",48)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        TNT1 A 0 A_GiveInventory("WhitePhosGrenade",2)
        TNT1 A 0 A_GiveInventory("StrifeGasGrenadeAmmo",2)
        stop

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",3)
        stop

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Nukes",random(4,6))
        stop
    }
}

actor SkullRodAmmo2 : SamsaraEnemyAmmoPickup
{
    States
    {
      Spawn:
        AMS1 A 0 Light("SSTAFFAMMO")
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        AMS1 AB 5 Light("SSTAFFAMMO")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 9, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmasmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(1,2))
        stop
    }
}

// Strife Enemy Ammo Drops
actor StrifeAcolyteDrop : SamsaraEnemyAmmoPickup
{
    +FLOORCLIP
    States
    {
      Spawn:
        BLIT A 0
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        BLIT A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Clip",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("RottMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Waves",0,1)
        goto PickupDisplay
        TNT1 A 0 A_JumpIfInventory("Catacomb_Zappers",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 0, 4)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletsmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Clip",5)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("RottMissiles",1)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Waves",1)
        TNT1 A 0 A_GiveInventory("Catacomb_Zappers",random(1,2))
        stop
    }
}

actor StrifeEnergyPod2 : SamsaraEnemyAmmoPickup
{
    +FLOORCLIP
    States
    {
      Spawn:
        BRY1 A 0
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        TNT1 A 0 A_ChangeFlag("NOTIMEFREEZE",false)
      SpawnActualAnim:
        BRY1 A 6
        BRY1 B 6 Light("ENERGY1")
        loop

      Pickup:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupCatacomb")
        TNT1 A 0 A_Jump(256,"PickupDefault") // for inheriting actors
        goto PickupDefault

      PickupDefault:
        TNT1 A 0 A_JumpIfInventory("Cell",0,"PickupFail")
        goto PickupDisplay

      PickupROTT:
        TNT1 A 0 A_JumpIfInventory("DMissiles",0,"PickupFail")
        goto PickupDisplay

      PickupCatacomb:
        TNT1 A 0 A_JumpIfInventory("Catacomb_Bolts",0,"PickupFail")
        goto PickupDisplay

      PickupDisplay:
        TNT1 A 0 A_Jump(256,"PickupDisplayDefault") // for inheriting actors
        goto PickupDisplayDefault

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 3, 9, 2)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmasmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccess:
        TNT1 A 0 A_JumpIfInventory("RottClass",1,"PickupSuccessROTT")
        TNT1 A 0 A_JumpIfInventory("CatacombClass",1,"PickupSuccessCatacomb")
        TNT1 A 0 A_Jump(256,"PickupSuccessDefault") // for inheriting actors
        goto PickupSuccessDefault

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",20)
        stop

      PickupSuccessROTT:
        TNT1 A 0 A_GiveInventory("DMissiles",5)
        stop

      PickupSuccessCatacomb:
        TNT1 A 0 A_GiveInventory("Catacomb_Bolts",random(1,2))
        stop
    }
}

actor StrifeBishopDrop : AmmoComboBig
{
    +DONTGIB
    +DROPPED
    +FLOORCLIP
    +NEVERRESPAWN
    States
    {
      Spawn:
        ROKT A 0
        goto SpawnGameModeCheck

      SpawnActual:
        TNT1 A 0 A_ChangeFlag("THRUACTORS",false)
        ROKT A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

// Other Reincarnation Ammo Pickups
actor HL_MP5clip : Ammo1Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        HL00 A 0
        goto SpawnGameModeCheck

      SpawnActual:
        HL00 A 0 A_ChangeFlag("THRUACTORS",false)
        HL00 A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

actor HL_ShotShell : Ammo2Small
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        HL00 A 0
        goto SpawnGameModeCheck

      SpawnActual:
        HL00 A 0 A_ChangeFlag("THRUACTORS",false)
        HL00 A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

actor HL_M203Grenade : Ammo3Small
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        HL00 A 0
        goto SpawnGameModeCheck

      SpawnActual:
        HL00 A 0 A_ChangeFlag("THRUACTORS",false)
        HL00 A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

actor Saw_Clipbox : Ammo4Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        HL00 A 0
        goto SpawnGameModeCheck

      SpawnActual:
        HL00 A 0 A_ChangeFlag("THRUACTORS",false)
        HL00 A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

actor Q2BulletsPickup : Ammo1Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        Q2AM A 0
        goto SpawnGameModeCheck

      SpawnActual:
        Q2AM A 0 A_ChangeFlag("THRUACTORS",false)
        Q2AM A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 7, 1, 1)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/bulletbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}

actor Q2ShellPickup : Ammo2Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        Q2AM A 0
        goto SpawnGameModeCheck

      SpawnActual:
        Q2AM A 0 A_ChangeFlag("THRUACTORS",false)
        Q2AM A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 7, 3, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/shellbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        TNT1 A 0 A_GiveInventory("Clip",50)
        stop

      PickupSuccessTotenkopf:
        goto PickupSuccessDefault

      PickupSuccessHexen1:
        TNT1 A 0 A_GiveInventory("Clip",50)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Duke64ExplosiveShells",1)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Shell",12)
        stop

      PickupSuccessStrife:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("StrifePoisonAmmo",5)
        TNT1 A 0 A_GiveInventory("RocketAmmo",2)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("Clip",25)
        TNT1 A 0 A_GiveInventory("Shell",10)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessShadowWarrior:
        goto PickupSuccessQuake1

      PickupSuccessHexen2:
        goto PickupSuccessHexen1

      PickupSuccessGoldenEye:
        goto PickupSuccessDisruptor

      PickupSuccessPainkiller:
      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("Painkiller_FreezerAmmo",1)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Shell",10)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo2",5)
        stop

      PickupSuccessDescent:
        goto PickupSuccessDisruptor
    }
}

actor Q2RocketsPickup : Ammo3Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        Q2AM A 0
        goto SpawnGameModeCheck

      SpawnActual:
        Q2AM A 0 A_ChangeFlag("THRUACTORS",false)
        Q2AM A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 7, 5, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/rocketbig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrMines",2)
        stop

      PickupSuccessWolfenstein:
        TNT1 A 0 A_JumpIfInventory("WolfenClassMode",2,"PickupSuccessTotenkopf")
        goto PickupSuccessDefault

      PickupSuccessTotenkopf:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("Totenkopf_FlameThrowerFuel",37)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        goto PickupSuccessDefault

      PickupSuccessDuke64:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("Duke64HeatSeekingRockets",3)
        stop

      PickupSuccessQuake1:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,"PickupStop")
        TNT1 A 0 A_GiveInventory("MultiRocketAmmo",3)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("RocketAmmo",10)
        stop

      PickupSuccessBlood:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("SprayCanAmmo",48)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessDisruptor:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("DisruptorBinaryLockOn",2)
        stop

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessPainkiller:
      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("Painkiller_HeaterAmmo",30)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo3",4)
        stop

      PickupSuccessQuake3:
        TNT1 A 0 A_GiveInventory("RocketAmmo",8)
        TNT1 A 0 A_GiveInventory("Q3GrenadeLauncherAmmo",6)
        stop
    }
}

actor Q2CellPickup : Ammo4Small
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        Q2AM A 0
        goto SpawnGameModeCheck

      SpawnActual:
        Q2AM A 0 A_ChangeFlag("THRUACTORS",false)
        Q2AM A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 7, 6, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmasmall",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessDefault:
        TNT1 A 0 A_GiveInventory("Cell",50)
        stop

      PickupSuccessDoom:
        TNT1 A 0 A_JumpIfInventory("DoomClassMode",2,"PickupSuccessStronghold")
        goto PickupSuccessDefault

      PickupSuccessStronghold:
        TNT1 A 0 A_GiveInventory("Cell",50)
        TNT1 A 0 A_JumpIfInventory("SamsaraExtraWeaponsAreEnabled",1,1)
        stop
        TNT1 A 0 A_GiveInventory("DoomguyStrGas",24)
        stop

      PickupSuccessDuke:
        TNT1 A 0 A_JumpIfInventory("DukeClassMode",2,"PickupSuccessDuke64")
        TNT1 A 0 A_GiveInventory("Cell",50)
        TNT1 A 0 A_GiveInventory("ExpanderAmmo",5)
        stop

      PickupSuccessDuke64:
        goto PickupSuccessDefault

      PickupSuccessQuake1:
        TNT1 A 0 A_JumpIfInventory("QuakeModeOn",1,2)
        TNT1 A 0 A_GiveInventory("LavaNails",10)
        TNT1 A 0 A_GiveInventory("Cell",50)
        stop

      PickupSuccessBlake:
        TNT1 A 0 A_GiveInventory("Cell",60)
        stop

      PickupSuccessCorridor7:
        goto PickupSuccessBlake

      PickupSuccessWitchaven:
        goto PickupSuccessBlake

      PickupSuccessPainkiller:
      PickupSuccessPainkillerReplenish:
        TNT1 A 0 A_GiveInventory("Cell",50)
        TNT1 A 0 A_GiveInventory("Painkiller_ElectroAmmo",15)
        stop

      PickupSuccessRTCW:
        TNT1 A 0 A_GiveInventory("Cell",50)
        TNT1 A 0 A_GiveInventory("RTCW_AlliedAmmo4",25)
        stop
    }
}

actor Q2SlugPickup : Ammo4Big
{
    +DONTGIB
    +DROPPED
    +NEVERRESPAWN
    States
    {
      Spawn:
        Q2AM A 0
        goto SpawnGameModeCheck

      SpawnActual:
        Q2AM A 0 A_ChangeFlag("THRUACTORS",false)
        Q2AM A -1 A_ChangeFlag("NOTIMEFREEZE",false)
        stop

      PickupDisplayDefault:
        TNT1 A 0 ACS_NamedExecuteAlways("SamsaraPickupMessages", 0, 7, 7, 0)
        TNT1 A 0 A_GiveInventory("SamsaraAmmoPickupBlend")
        TNT1 A 0 A_PlaySound("ammo/plasmabig",CHAN_ITEM|CHAN_MAYBE_LOCAL)
        goto PickupSuccess

      PickupSuccessPainkiller:
        goto PickupSuccessPainkillerReplenish
    }
}
