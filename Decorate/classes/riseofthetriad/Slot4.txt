ACTOR MP40 : Weapon
{
     Weapon.SlotNumber 4
	 Weapon.SlotPriority 0
     Weapon.SelectionOrder 1100
     Inventory.PickupSound "gen/pickup"
     Inventory.Pickupmessage "You picked up an MP40!"
	 Weapon.UpSound "gen/wepswitch"
     Obituary "%k bullet-whored %o with an MP40."
	 Attacksound "mp40/shoot"
	 Inventory.RestrictedTo "IPFreeley"
     Tag "MP40"
     States 
     { 
     Spawn: 
        PM40 A -1 
        Stop 
     Ready: 
		TNT1 A 0 A_GiveInventory("UsingFirearm", 1)
        MP40 A 1 A_WeaponReady 
        Goto Ready+1
     Deselect: 
        MP40 A 1 A_Lower 
        Loop 
     Select:
        MP40 A 1 A_Raise
        Loop 
     Fire: 
	    TNT1 A 0 A_PlayWeaponSound("mp40/shoot")
		TNT1 A 0 A_JumpIfInventory("CoopModeOn", 1, "CoopFire")
		TNT1 A 0 A_FireBullets(3.6,3.0,1,10,"RottPuff", FBF_NORANDOM)
	Continue:
        MP40 B 1 Bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_GunFlash
        MP40 B 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        MP40 C 1 Offset(0,32) A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MP40 C 1 Offset(0,34) A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		MP40 A 1 Offset(0,32) A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_Refire
        MP40 A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
        Goto Ready+1
	CoopFire:
		TNT1 A 0 A_FireBullets(3.6,3.0,1,10,"RottPuffCoop", FBF_NORANDOM)
		Goto continue
     } 
}

Actor RottMP40Bullet : RottPistolBullet { Damage (10) Obituary "%k bullet-whored %o with an MP40." }