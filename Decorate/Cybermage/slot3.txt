ACTOR CMBlastRifle : Weapon
{
	Weapon.AmmoType "Shell"
	Weapon.AmmoGive 8
	Weapon.AmmoUse 2
	Weapon.SlotNumber 3
	Weapon.BobStyle InverseAlpha
	Weapon.BobRangeX 0.5
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 2.3	
	+FLOORCLIP
	Weapon.SelectionOrder 3300
	+Inventory.UNDROPPABLE
	Inventory.PickupSound "misc/w_pkup" 
	Inventory.PickupMessage "You got the Blast Rifle!"
	Obituary "%o was torn to shreds by $k's Blast Rifle."
	Inventory.RestrictedTo "CMPlayer"	
	Tag "Blast Rifle"	
	States
	{
	Spawn:
		CMBR I -1
		Loop  
	Select:
		TNT1 A 0 A_Raise
		CMBR E 1 A_Raise
		Loop
	Ready:
		CMBR A 1 A_WeaponReady
		Loop
	Deselect:
		TNT1 A 0 A_Lower
		CMBR E 1 A_Lower
		Loop
	Fire:
		CMBR C 3 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_PlaySound("CM/BRFire", CHAN_WEAPON)
		TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"X")
		TNT1 AAAAAAA 0 A_FireCustomMissile("CMBLASTRTRACER_2",frandom(6.00,-6.00),0,0,frandom(11.00,-11.00))
		TNT1 A 0 A_FireBullets (11, 6, 7, 19, "CMBRPuff")
		Goto A
	X:	
		TNT1 AAAAAAA 0 A_FireCustomMissile("CMBLASTRTRACER_2",frandom(6.00,-6.00),0,0,frandom(11.00,-11.00))		
		TNT1 AAAAAA 0 A_FireCustomMissile("CMCoopBullet3",fRandom(-6.00,6.00),0,0,fRandom(11.00,-11.00))
		TNT1 A 0 A_FireCustomMissile("CMCoopBullet3",fRandom(-6.00,6.00),1,0,fRandom(11.00,-11.00))
	A:	
		CMBR D 5 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR B 2 BRIGHT A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_CheckReload
		CMBR P 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR Q 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR A 0 A_PlaySound("CM/BRReload1", CHAN_BODY)
		CMBR J 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR K 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR L 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR M 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR L 6 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR K 12 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR L 6 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR A 0 A_PlaySound("CM/BRReload2", CHAN_BODY)
		CMBR K 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR J 4 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR Q 7 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		CMBR P 7 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		TNT1 A 0 A_ReFire
		CMBR A 2 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		Goto Ready
	}
}

Actor CMCoopBullet3 : FastProjectile
{
  Speed 300
  Damage (19*Random(random(1,2),3))
  Radius 1
  Height 1
  Projectile
  Species "Player"
  +THRUSPECIES
  +DONTHARMCLASS
  +DONTHARMSPECIES
  +MTHRUSPECIES
  +BLOODSPLATTER
  +NOTIMEFREEZE
  +THRUGHOST
  States
  {
  Spawn:
    TNT1 A 1
    Loop
  Death:
  XDeath:
  Crash:  
    TNT1 A 1 A_SpawnItemEx("CMBRPuff",0,0,0,0,0,0,0,128,0)
    stop
    }
}