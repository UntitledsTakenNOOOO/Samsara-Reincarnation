Actor "Phase Repeater" : Weapon
{
  Weapon.SelectionOrder 1700
  Weapon.SlotNumber 4 
  weapon.BobStyle normal
  weapon.BobRangeX 1.2
  weapon.BobRangeY 0.5
  weapon.BobSpeed 2.0  
  Weapon.AmmoUse 2
  Weapon.AmmoGive 60
  Weapon.AmmoType "Clip"
  Weapon.AmmoUse2 0
  Weapon.AmmoGive2 0  
  Weapon.AmmoType2 "DisruptorHiFreq"  
  +WEAPON.AMMO_OPTIONAL
  +WEAPON.ALT_AMMO_OPTIONAL 
  +WEAPON.NOALERT
  Obituary "%o was got phased by %k."
  Inventory.PickupMessage "You got a Phase Repeater!"
  Inventory.RestrictedTo "DisruptorPlayer"  
  States
  {
  Ready:
	TNT1 A 0 A_JumpIfInventory("DisruptorMode", 1, "ReadyRed")
    SQ74 AAAABBBBCCCCDDDDEEEEFFFF 1 A_WeaponReady
    Loop
  ReadyRed:
    SQ70 EEEEDDDDCCCCBBBBAAAALLLL 1 A_WeaponReady
    Loop	
  Deselect:
	TNT1 A 0 A_JumpIfInventory("DisruptorMode", 1, "DeselectRed")
	TNT1 A 0 A_Lower
    SQ74 A 1 A_Lower
	Loop
  Select:
	TNT1 A 0 A_JumpIfInventory("DisruptorMode", 1, "SelectRed")  
	TNT1 A 0 A_Raise
    SQ74 A 1 A_Raise
    Loop
  DeselectRed:
	TNT1 A 0 A_Lower
    SQ74 A 1 A_Lower
	Loop
  SelectRed:
	TNT1 A 0 A_Raise
    SQ74 A 1 A_Raise
    Loop	
  Fire:
	TNT1 A 0 A_JumpIfInventory("DisruptorMode", 1, "FireRed")  
 	TNT1 A 0 A_JumpIfInventory("Clip", 2, 1)
	Goto Altfire   
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",1,"Fire2")  	
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_1",7,1,0,0)
	Goto N
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_2",7,1,0,0)	
  N:	
	SQ74 G 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ74 GH 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ74 H 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ74 H 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Fire2:
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",2,"Fire3")    
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_1",0,1,0,0)
	Goto O
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_2",0,1,0,0)
  O:
	SQ74 I 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ74 IJ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ74 J 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ74 J 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Goto Ready
  Fire3:
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",3,"Fire4")  	  
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_1",-7,1,0,0)
	Goto P
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_2",-7,1,0,0)	
  P:
	SQ74 K 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ74 KL 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ74 L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ74 L 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Fire4:
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_1",0,1,0,0)
	Goto Q
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_2",0,1,0,0)	
  Q:
	SQ74 I 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ74 IJ 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_TakeInventory("DisruptorShit2",3)
	SQ74 J 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ74 J 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  FireRed:
	TNT1 A 0 A_JumpIFInventory("DisruptorHiFreq", 1, 1)
	Goto AltfireRed  
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",1,"FireRed2")  	
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_TakeInventory("DisruptorHiFreq", 1, TIF_NOTAKEINFINITE)	
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",7,0,0,0)
	Goto R
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",7,0,0,0)	
  R:	
	SQ70 F 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 FG 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ70 G 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  FireRed2:
	TNT1 A 0 A_JumpIFInventory("DisruptorHiFreq", 1, 1)
	Goto AltfireRed   
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",2,"FireRed3")    
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_TakeInventory("DisruptorHiFreq", 1, TIF_NOTAKEINFINITE)
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",0,0,0,0)
	Goto S
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",0,0,0,0)
  S:
	SQ70 H 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 HI 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_Refire
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	Goto Ready
  FireRed3:
	TNT1 A 0 A_JumpIFInventory("DisruptorHiFreq", 1, 1)
	Goto AltfireRed   
    TNT1 A 0 A_JumpIfInventory("DisruptorShit2",3,"FireRed4")  	  
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_TakeInventory("DisruptorHiFreq", 1, TIF_NOTAKEINFINITE)	
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)	
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",-7,0,0,0)
	Goto T
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",-7,0,0,0)	
  T:
	SQ70 J 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 JK 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_GiveInventory("DisruptorShit2",1)
	SQ70 K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ70 K 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  FireRed4:
	TNT1 A 0 A_JumpIFInventory("DisruptorHiFreq", 1, 1)
	Goto AltfireRed   
    TNT1 A 0 A_PlaySound("Disruptor/GreenLaser",CHAN_WEAPON)
	TNT1 A 0 A_TakeInventory("DisruptorHiFreq", 1, TIF_NOTAKEINFINITE)	
	TNT1 A 0 A_AlertMonsters
    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,2)
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_12",0,0,0,0)
	Goto U
	TNT1 A 0 A_FireCustomMissile("DisruptorGP_22",0,0,0,0)	
  U:
	SQ70 H 1 bright A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	SQ70 HI 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
	TNT1 A 0 A_TakeInventory("DisruptorShit2",3)
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
 	TNT1 A 0 A_Refire
	SQ70 I 1 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
    Goto Ready
  Altfire:
	TNT1 A 0 A_JumpIfInventory("DisruptorMode", 1, "AltfireRed")
	SQ70 EE 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOSECONDARY)
	SQ70 E 0 A_GiveInventory("DisruptorMode", 1)
	Goto ReadyRed
  AltfireRed:	
  	SQ74 AA 5 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH|WRF_NOSECONDARY)
	SQ74 A 0 A_TakeInventory("DisruptorMode")
	Goto Ready		
  Spawn:
    SQ72 U -1
    Stop	
	}
}

Actor DisruptorGP_12 : DisruptorGP_1
{
	Obituary "%o ate %k's spicy shit"
	Radius 6
	Damage (0)	
//	+SPECIALFIREDAMAGE //WHY NOT? No.
	+THRUACTORS
	+FORCERADIUSDMG
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		SQ99 D 0 
		SQ99 D 0 A_JumpIf(CallACS("Samsara_ProjectilePredictor",1)==1,1)
		SQ99 DDEEFFGGHHIIJJKK 1 bright ACS_NamedExecuteAlways("Samsara_ProjectilePredictor",0,1,0,0)//A_Explode(Random(20,30), 6, !XF_HURTSOURCE, false, 6)
		Loop
	Death:
		SQ99 LMNOPQRSTUVW 3 Bright
		SQ99 XYZ 2 Bright
		stop
	XDeath:
    Crash:
//		TNT1 A 0 A_Explode(Random(20,30), 30, !XF_HURTSOURCE, false, 30)
		SQ98 QRSTUVWXYZ 3 Bright 
		SQ99 ABC 2 Bright 	  
		stop			  
	}
}

Actor DisruptorGP_12_Explosion
{
	Projectile
	Height 2
	Radius 1
	Speed 0
	Obituary "%o ate %k's spicy shit"
	+NOINTERACTION
	+FORCERADIUSDMG
	+NODAMAGETHRUST
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_Explode(Random(1,2), 6, !XF_HURTSOURCE, false, 6)
			TNT1 A 1
			Stop
	}
}

Actor DisruptorGP_22 : DisruptorGP_12 { Species "Player" +THRUSPECIES }
actor DisruptorShit2 : inventory { inventory.amount 1 inventory.maxamount 3 }