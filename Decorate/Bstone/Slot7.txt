actor "Anti-Plasma Cannon": InstantSwitchWeapon
{
    Weapon.SelectionOrder 1000
    Weapon.SlotNumber 7
	Weapon.BobStyle Alpha
	Weapon.BobRangeX 0
	Weapon.BobRangeY 0.6
	Weapon.BobSpeed 1.5	
    Inventory.PickUpSound "wolfen/knifeget"
    Obituary "%k obliterated %o with the Anti-Plasma Cannon"
    Inventory.PickupMessage "You got an Anti-Plasma Cannon!"
    DamageType "BlakePlasma"
    Weapon.AmmoUse 8
    Weapon.AmmoGive 50
	Weapon.AmmoType "Cell"
    +INVENTORY.UNDROPPABLE
    Weapon.YAdjust 12
	Inventory.RestrictedTo "BlakeStone"		
    States
    {
      Spawn:
        BWP7 A -1
        Loop

      Ready:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, 2)
        DCAN A 1 A_WeaponReady
        loop
		DCAN F 1 A_WeaponReady
		loop

      Fire:
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "FireAOG")
        DCAN B 3
	  Hold:	
		TNT1 A 0 A_JumpIfInventory("BlakeAOGToken", 1, "HoldAOG")
        TNT1 A 0 A_PlayWeaponSound("DRifle/Fire")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"SPHold")
	    TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopHold")
        DCAN C 3 BRIGHT A_FireCustomMissile("DCannonProjDM", Random(-5,5), 1, 0, 4)
		DCAN DE 2
		DCAN A 5 A_Refire
        Goto Ready	
	  SPHold:
        DCAN C 3 BRIGHT A_FireCustomMissile("DCannonProj", Random(-5,5), 1, 0, 4)
		DCAN DE 2
		DCAN A 5 A_Refire
        Goto Ready		  
      CoopHold:
        DCAN C 3 BRIGHT A_FireCustomMissile("DCannonProjCoop", Random(-5,5), 1, 0, 4)
		DCAN DE 2
		DCAN A 5 A_Refire
		Goto Ready
	  FireAOG:
        DCAN G 3
	  HoldAOG:	
        TNT1 A 0 A_PlayWeaponSound("DRifle/Fire")
		TNT1 A 0 A_JumpIfInventory("SPModeOn",1,"SPHoldAOG")
        TNT1 A 0 A_JumpIfInventory("CoopModeOn",1,"CoopHoldAOG")		
        DCAN H 3 BRIGHT A_FireCustomMissile("DCannonProjDM", Random(-5,5), 1, 0, 4)
		DCAN GG 2
		DCAN F 5 A_Refire("HoldAOG")
        Goto Ready
	  SPHoldAOG:
        DCAN H 3 BRIGHT A_FireCustomMissile("DCannonProj", Random(-5,5), 1, 0, 4)
		DCAN GG 2
		DCAN F 5 A_Refire("HoldAOG")
        Goto Ready	  
	  CoopHoldAOG:
        DCAN H 3 BRIGHT A_FireCustomMissile("DCannonProjCoop", Random(-5,5), 1, 0, 4)
		DCAN GG 2
		DCAN F 5 A_Refire
        Goto Ready	  
    }
}

Actor DCannonProj
{
	PROJECTILE
    Damage 20
	Radius 12
	Height 8
	Scale 1.25
	Speed 16
	Decal Scorch
	DeathSound "BCannon/Boom"
	DamageType "DCannonProj"
//	ProjectileKickBack 0.8 --> Damn u Zandronum	
	+EXTREMEDEATH
	-NOEXTREMEDEATH
	+FORCERADIUSDMG
	+RIPPER
	+BLOODLESSIMPACT
	+FORCEXYBILLBOARD	
//	+NOTIMEFREEZE
//	+WINDTHRUST
	States
	{
		Spawn:
			9C0P A 1 Bright //A_Explode(100, 12, !XF_HURTSOURCE, false, 12)
			Loop
		Death:
			TNT1 A 0 A_Explode(200, 128)
			TNT1 A 0 A_BFGSpray("DCannonPuff", 25, 12)
			DCAP BCDEFGHI 3 Bright
			Stop
	}
}

Actor DCannonProjDM : DCannonProj
{
	States
	{
		Death:
			TNT1 A 0 A_Explode(128, 75)
			TNT1 A 0 A_BFGSpray("DCannonPuff", 10, 8)
			DCAP BCDEFGHI 3 Bright
			Stop
	}
}	

ACTOR DCannonProjRipper
{
	Damage (100)//(150)
	PROJECTILE
	Radius 12
	Height 8
	Scale 1.25
	Decal Scorch
	DamageType "DCannonProj"
	DeathSound "BCannon/Boom"
	+EXTREMEDEATH
	-NOEXTREMEDEATH
	+BLOODLESSIMPACT
	+NOTIMEFREEZE	
	States
	{
		Spawn:
			TNT1 A 1 Bright
			Stop
	}
}

Actor DCannonProjCoop : DCannonProj
{
	Species "Player"
	+THRUSPECIES
	+DONTHARMCLASS
	+DONTHARMSPECIES
	+MTHRUSPECIES
	+NODAMAGETHRUST
}

Actor DCannonProjRipper_2 : DCannonProjRipper { Species "Player" +THRUSPECIES +DONTHARMCLASS +NODAMAGETHRUST +DONTHARMSPECIES +MTHRUSPECIES }

Actor DCannonPuff 
{
	+NOGRAVITY
	+NOINTERACTION
	RenderStyle Normal
	Scale 1.0
	DamageType "DCannonProj"	
	States
	{
		Spawn:
			DCAP BCDEFGHI 3 Bright
			Stop
	}
}		