actor Leonard : SamsaraPlayerPawnNormalColoredBlood
{
	Player.DisplayName "Leonard"
	Player.StartItem " .454 Casull Pistol ", 1
	Player.StartItem " RR Crowbar ", 1
	Player.StartItem "RRClass", 1
	Player.StartItem "IsSamsaraClass", 1
	Player.StartItem "Clip", 50
	Player.StartItem "LeonardPistolReload", 6
	Player.StartItem "TauntButton", 1
	Player.Soundclass "Leonard"
	Player.JumpZ 10//Default is 8
	Player.ForwardMove 1.09
	Player.SideMove 1.09
	Player.ColorRange 112,127
	Player.CrouchSprite "LE_C"
	DamageFactor "RebelMissile", 0
	DamageFactor "DynamiteCoop", 0.0  
	DamageFactor "SWFlameCoop", 0.0  
	DamageFactor "SWStickyCoop", 0.0	
	DamageFactor "C7MineBoom", 0.0	
	DamageFactor "Mace", 1.12
	DamageFactor "CMDMGSHIT", 0.0	
	DamageFactor "PhosFireCoop", 0.0
	DamageFactor "Telefrag", 2.0
	DamageFactor "PoisonCloud", 1.0
	DamageFactor "Wraithverge", 0.99
	DamageFactor "CorvusCrossbow", 1.0
	DamageFactor "DragonClaw", 1.0
	DamageFactor "MarathonPistol", 1.1
	DamageFactor "Pistol", 1.1
	DamageFactor "DoomFist", 0.9
	DamageFactor "ZorchPistol", 0.9
	DamageFactor "BFG", 0.94
	DamageFactor "BFGSpray", 0.94
	DamageFactor "Zorch", 0.94
	DamageFactor "PhasingZorch", 0.95
	DamageFactor "Normal", 1.0  
	DamageFactor "Ice", 0.93
	DamageFactor "Fire", 0.92
	DamageFactor "Slime", 0.94
	DamageFactor "Disintegrate", 0.94
	DamageFactor "Poison", 0.91
	DamageFactor "WolfenFlamethrower", 0.91
	DamageFactor "DukeDamage", 1.15
	DamageFactor "DukeExplosive", 1.1
	DamageFactor "DukeSpectral", 0.94
	DamageFactor "MightyBoot", 1.2
	DamageFactor "DukeIce", 0.89   
	DamageFactor "DukePistol", 1.1
	DamageFactor "Explosive", 1.12
	DamageFactor "MarathonFusion", 0.93
	DamageFactor "DoomPlasma", 0.87
	DamageFactor "CorvusHellstaff", 1.0
	DamageFactor "CorvusHellstaffTomed", 1.0
	DamageFactor "MarathonPlasma", 0.95
	DamageFactor "BJSpear", 1.0
	DamageFactor "DoomCacodemon", 0.91
	DamageFactor "DoomHellNoble", 0.96
	DamageFactor "DoomSpiderPlasma", 0.94
	DamageFactor "DoomTheseGuysAreTheBest", 1.1
	DamageFactor "HereNitrogolem", 1.0
	DamageFactor "HereAxeGreen", 1.0
	DamageFactor "HereAxeRed", 1.0
	DamageFactor "Wizard", 1.0
	DamageFactor "HereLichWind", 1.0
	DamageFactor "HereDsparil", 1.0
	DamageFactor "HexBishop", 1.0
	DamageFactor "HexSlaughtaur", 1.0
	DamageFactor "HexGreenFire", 0.87
	DamageFactor "HexStalkerShot", 1.0
	DamageFactor "HexHeresiarchPurple", 1.0
	DamageFactor "WMCBeam", 0.77
	DamageFactor "WMCNade", 1.1
	DamageFactor "QuakePistol", 1.1
	DamageFactor "NotQuadded", 1.1
	DamageFactor "SpectralNoQuad", 1.1
	DamageFactor "MarathonStun", 0.88
	DamageFactor "QuakeFire", 0.95
	DamageFactor "FireExplosive", 1.0
	DamageFactor "PunchDagger", 1.1
	DamageFactor "ElectricBolt", 0.84
	DamageFactor "PoisonBolt", 1.1
	DamageFactor "MiniExplosive", 1.12
	DamageFactor "StrifeExplosive", 1.13
	DamageFactor "StrifeRebelBullet", 1.1
	DamageFactor "Kamikaze", 1.33333333333
	DamageFactor "ZorchKamikaze", 1.33333333333
	DamageFactor "EnemyInfightDamage", 0.0  
	DamageFactor "RottExplosive", 1.15
	DamageFactor "RottFire", 0.92
	DamageFactor "RottBullet", 1.1
	DamageFactor "BlakePlasma", 0.86
	DamageFactor "BlakeBullet", 1.1
	DamageFactor "Dynamite", 1.11
	DamageFactor "LifeLeech", 0.97
	DamageFactor "Tesla", 0.89
	DamageFactor "CalebBullet", 1.12
	DamageFactor "CalebNapalm", 1.16
	DamageFactor "CalebFire", 0.99
	DamageFactor "EradCoopGreenFire", 0.0	
	DamageFactor "DCannonProj", 1.12
	DamageFactor "EradCoopExplosive2", 0.0
	DamageFactor "BCannonProj", 0.89
	DamageFactor "RMR-BigPlasma", 0.93
	DamageFactor "RMR-RedPlasma", 0.92
	DamageFactor "RMR-CyanPlasma", 0.98		
	DamageFactor "RMR-GreenPlasma", 0.97
	DamageFactor "RMR-DiscoBall", 1.13	
	DamageFactor "RMR-Bullet", 1.1	
	DamageFactor "RMR-YellowPlasma2", 0.98
	DamageFactor "RMR-YellowPlasma", 0.93
	DamageFactor "Disruptoruniversaldamageshit4", 1.15
	DamageFactor "Disruptoruniversaldamageshit3", 0.88
	DamageFactor "Disruptoruniversaldamageshit2",	0.91
	DamageFactor "Disruptoruniversaldamageshit1", 1.16
	DamageFactor "DisruptorWall", 1.0
	DamageFactor "SWNukeCoop", 0.0		
	DamageFactor "SWRailgunCoop", 0.0
	DamageFactor "SWFlame2Coop", 0.0
	BloodType "LeonardBlood_RR"  
	Bloodcolor "ba 2c 10" // Needed for various functions dependent on blood color
	YScale 0.30
	XScale 0.361
	+NOBLOODDECALS
	var int user_scalex;
	var int user_scaley;
	states
	{
		Spawn:
			LEO_ A 0
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ TTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIfInventory("LeonardWaiting", 15, "LeonardWait")
			LEO_ A 0 A_GiveInventory("LeonardWaiting", 1)
			Loop
		LeonardWait:
			LEO_ T 1 A_TakeInventory("LeonardWaiting", 15)
			Goto Spawn
		See:
			LEO_ A 0 A_TakeInventory("LeonardWaiting", 15)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 50)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ IIII 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 44)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ JJJJ 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 38)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ KKKK 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 32)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ LLLL 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 26)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ MMMM 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 20)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ NNNN 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 14)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ OOOO 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 8)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ PPPP 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 2)
			LEO_ A 0 A_Jump(256, "See")
			LEO_ AAAA 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ BBBB 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ CCCC 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ DDDD 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ EEEE 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ FFFF 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ GGGG 1 A_JumpIf(momz >> 0, "Jumping")
			LEO_ A 0 A_JumpIf (ACS_NamedExecuteWithResult ("HLWalkRun", (momx / 1.0), (momy / 1.0), (momz / 1.0)), 3)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ A 0 A_Jump(256, "See")
			LEO_ HHHH 1 A_JumpIf(momz >> 0, "Jumping")
			Loop
		Jumping:
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ HHH 1
			LEO_ H 1 A_JumpIf(momz >> 0, "Jumping")
			goto Spawn
		Swimming:
			LE_S WWWW 1 A_JumpIf(waterlevel < 3, "See")
			LE_S XXXX 1 A_JumpIf(waterlevel < 3, "See")
			LE_S YYYY 1 A_JumpIf(waterlevel < 3, "See")
			Loop
		Pain:
			LEO_ A 0 A_TakeInventory("LeonardWaiting", 15)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ U 4
			LEO_ U 4 A_Pain
			Goto Spawn
		Pain.Shock:
		Pain.Tesla:
			CBGS L 4 A_Pain
			CBGS L 4
			Goto See
		Missile:
			LEO_ A 0 A_TakeInventory("LeonardWaiting", 15)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ TVVVTT 3
			Goto Spawn
		Melee:
			LEO_ A 0 A_TakeInventory("LeonardWaiting", 15)
			LEO_ A 0 A_JumpIf(waterlevel > 2, "Swimming")
			LEO_ V 6 BRIGHT
			LEO_ V 6
			Goto Spawn
		Death:
			TNT1 A 0 A_SpawnItem("UniversalBloodyHellGoreDeathEffect")
			LE_3 A 8 A_PlayerScream
			LE_3 B 8 A_NoBlocking
			LE_3 C 8 
			LE_3 D 8
			LE_3 EFGH 8
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			LE_3 I -1
			Stop
		Death.CalebFire:
		Death.LifeLeech:
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			TNT1 A 0 A_Jump(218, 2)
			TNT1 A 0 A_PlayerScream
			TNT1 A 0 A_GiveToTarget("CalebDMTaunt1", 1)
			TNT1 A 0 A_PlaySoundEx("*falling",CHAN_VOICE,0,0)
			TNT1 A 0 A_SpawnItemEx("BloodBurningCorpse_Silent_Leonard", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_SETMASTER)
			TNT1 A 0 A_UnsetSolid
			TNT1 A -1
			Stop
		XDeath:
			TNT1 A 0 A_UnsetSolid  
			TNT1 A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
			TNT1 A 0 A_SpawnItemEx("LeonardBlood_RR")
			RR20 A 0 A_CustomMissile("LeonardHead_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 AA 0 A_CustomMissile("LeonardArm_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 AA 0 A_CustomMissile("LeonardLeg_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))  
			RR20 A 0 A_CustomMissile("MiscGib1_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 A 0 A_CustomMissile("MiscGib2_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 A 0 A_CustomMissile("MiscGib3_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 A 0 A_CustomMissile("MiscGib4_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 A 0 A_CustomMissile("MiscGib5_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))
			RR20 A 0 A_CustomMissile("MiscGib6_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))	
			RR20 AAAAA 0 A_CustomMissile("MiscGib7_RR",0+Random(30,60),0+Random(35,-35),0+Random(0,370))	
			TNT1 A 0 A_PlaySound("Leonard/XDeath",CHAN_BODY,1.0,0,ATTN_NORM)
			TNT1 A 5 A_NoBlocking
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			TNT1 A -1 
			Stop
		Burn:
			TNT1 A 0
			TNT1 A 0 A_Fall
			TNT1 A 0 A_SpawnItem("BurnDeathLeonard")
			TNT1 A 5 A_PlaySound("Leonard/Scream")
			TNT1 A 105
			TNT1 A 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			TNT1 A -1
			stop
		Death.DukeIce:
			"####" "#" 0 A_Jump(218,"Ice")
			"####" "#" 0 A_GiveToTarget("DukeDMTaunt1",1)
			goto Ice
		Ice:
		Death.HexenIce:
		Death.WTMeleeIce:
		Death.WTRangedIce:
		Death.DoomDamageTypeIce:
		Death.Ice:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Ice
		Disintegrate:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Disintegrate
		Death.RottDisintegrate:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.RottDisintegrate
		Death.Nuke:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.Nuke
		Death.ZorchPistol:
		Death.Zorch:
		Death.ZorchKamikaze:
		Death.PhasingZorch:
		Death.ZorchSpectral:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.ZorchSpectral
		Death.TotenkopfFire:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.TotenkopfFire
		Death.RottFire:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.RottFire
		XDeathForRanger:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::XDeathForRanger
		Death.Nuke:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.Nuke
		Death.RottExplosive:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.RottExplosive
		Death.FreemanGibs:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.FreemanGibs
		XDeathForBitterman:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::XDeathForBitterman
		XDeathForDemoness:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::XDeathForDemoness
		UnrealXDeath:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::UnrealXDeath
		RTCWXDeath2:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::RTCWXDeath2
		XDeath.Q3Energy:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::XDeath.Q3Energy
		Death.DukePlasma:
			"####" "#" 0 ACS_NamedExecuteAlways("SamsaraDecorate", 0, 37)
			Goto Super::Death.DukePlasma
		Death.ExpanderDMG:
		XDeath.ExpanderDMG:
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoop
		ExpanderLoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPop")
			loop
		ExpanderPop:	
			"####" "#" 10
			"####" A 0 A_SpawnItemEx("ExpanderExplosion_Basic",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
			"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
			"####" A 0 A_Jump(96,2)
			"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
			"####" A 0 A_SetScale (1.0, 1.0)
			"####" A 0 A_UnsetSolid
			"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
			"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
			TNT1 A -1 A_UnsetSolid
			Stop
		Death.ExpanderDMGCoop:
		XDeath.ExpanderDMGCoop:
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/expand")
			Goto ExpanderLoopCoop
		ExpanderLoopCoop:
			"####" "#" 1 A_SetScale(1.1*(user_scalex/65536.0)+((0.01*(user_scalex/65536.0))*CallACS("Samsara_Expander",1))+((0.01*(user_scalex/65536.0))*(CallACS("Samsara_Expander",1)-CallACS("Samsara_Expander",2)))*(CallACS("Samsara_Expander",3)*2),1.1*(user_scaley/65536.0)+((0.01*(user_scaley/65536.0))*CallACS("Samsara_Expander",2)))
			"####" "#" 0 A_GiveInventory("ExpanderGrowthX", 1)
			"####" "#" 0 A_JumpIf(ceilingz - (z + height + CallACS("Samsara_Expander",1) + 32) <= 0, 2)
			"####" "#" 0 A_GiveInventory("ExpanderGrowthY", 1)
			"####" "#" 0 A_GiveInventory("ExpanderDoubleX", 1)
			"####" "#" 0 A_JumpIfInventory("ExpanderGrowthX", 40, "ExpanderPopCoop")
			loop
		ExpanderPopCoop:	
			"####" "#" 10
			"####" A 0 A_SpawnItemEx("ExpanderExplosion_Coop",0,0,height*2,0,0,0,0,SXF_NOCHECKPOSITION|SXF_SETMASTER)
			"####" A 0 A_PlaySound("duke/explosion", 6, 1.0)
			"####" A 1 ACS_NamedExecuteWithResult("SamsaraDecorate",36,2)
			"####" A 0 A_Jump(96,2)
			"####" A 0 A_GiveToTarget("DukeDMTaunt1", 1)
			"####" A 0 A_SetScale (1.0, 1.0)
			"####" A 0 A_UnsetSolid
			"####" A 0 A_SpawnItemEx("UniversalBloodyHellGoreXDeathEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR|1048576)
			"####" A 0 A_SpawnItemEx("DukeGibPopSpawner", 0, 0, height*2, 0, 0, 0, 0, SXF_NOCHECKPOSITION|SXF_USEBLOODCOLOR)
			"####" A 0 A_GiveToTarget("DukeDMTaunt1",1)
			TNT1 A -1 A_UnsetSolid
			Stop
		Pain.ShrinkerDMG:
			TNT1 A 0 A_ChangeFlag("NOPAIN",true)
			TNT1 A 0 A_ChangeFlag("NODAMAGE",true)
			LEO_ U 0 ACS_NamedExecuteAlways("Samsara_PlayerShrinker")
			"####" "#" 0 A_SetUserVar("user_scalex", scalex*65536.0)
			"####" "#" 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 0 A_PlaySound("duke/shrink")
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 0 A_SpawnItemEx("Leonard_ShrinkEffect",0,0,0,0,0,0,0,SXF_NOCHECKPOSITION|SXF_TRANSFERTRANSLATION)
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 4 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			TNT1 A 0 A_ChangeFlag("NOPAIN",false)
			TNT1 A 0 A_ChangeFlag("NODAMAGE",false)
			Goto Spawn
	}
}

Actor Leonard_Shrink : Leonard
{
	Player.ForwardMove 0.25
	Player.SideMove 0.25
	Player.MorphWeapon "ShrunkWeapon"
	Player.ViewHeight 8
	DamageFactor "ZorchPistol", 0.0
	DamageFactor "Zorch", 0.0
	DamageFactor "ZorchKamikaze", 0.0
	DamageFactor "PhasingZorch", 0.0
	DamageFactor "ZorchSpectral", 0.0
	MaxStepHeight 2
	Height 8
	Radius 4
	-SOLID
	+NOPAIN
	States
	{
		Spawn:
			LEO_ T 1
			Loop
		See:
			LEO_ IJKLMNOP 4
			Loop
		Death.PhosFireCoop:
		Death.HexGreenFire:
		Death.QuakeFire:
		Death.FireExplosive:
		Death.PGFire:
		Death.WTRangedFire:
		Death.WolfenFlamethrower:	  
		Death.MarathonPlasma:
		Burn:
		Death.TotenkopfFire:
		Death.DukeDamage:
		Death.DukePistol:
		Death.MightyBoot:
		Death.DukeExplosive:
		Death.DukeIce:
		Ice:
		Death.HexenIce:
		Death.Ice:
		Death.ExpanderDMG:
		XDeath.ExpanderDMG:
		Death.ExpanderDMGCoop:
		XDeath.ExpanderDMGCoop:
		Death.QuakeElectric:
		Death.NotQuadded:
		Death.QuakeExplosive:
		XDeath.QuakeElectric:
		XDeath.NotQuadded:
		XDeath.QuakeExplosive:
		Death.RottExplosive:
		Death.RottFire:
		Death.RottDisintegrate:
		Death.CalebFire:
		Death.LifeLeech:
		Death.CalebNapalm:
		Death.Vodoo:
		Death.VoodooPuff:
		Death.DynamiteCoop:
		Death.Dynamite:
		Death.Shock:  
		Death.Tesla:
		Death.CalebBullet:
		Disintegrate:
		Death.EradExplosive:
		Death.EradNova:
		Death.EradShock:
		Death.EradExplosive2:
		Death.EradDisc:
		Death.EradPiercingDart:
		Death.EradGreenFire:
		Death.EradCoopGreenFire:
		Death.Nuke:
		Death.HLLaser:
		Death.HLExplosive:
		Death.HLRPGExplosive:
		Death.HLEgon:
		Death.FreemanGibs:
		Death.SWFist:
		Death.SWKatana:
		Death.SWShuriken:
		Death.SWSticky:
		Death.SWStickyCoop:
		Death.SWGrenade:
		Death.SWNuke:
		Death.SWRocket:
		Death.SWRailgun:
		Death.SWRailgunCoop:
		Death.SWNukeCoop:
		Death.SWFlame:
		Death.SWFlame2:
		Death.SWFlame2Coop:
		Death.SWFlame3:	
		Death.SWBullet:
		Death.PSRAPower:
		Death.PSRAPowerCoop:
		Death.PSExplosive:
		Death.PSExplosiveCoop:
		Death.PSBullet:
		Death.PSFire:
		Death.PSFire:
		Death.LeonardDamage2:
		Death.LeonardDamage3:
		Death.LeonardDamage0:
		Death.LeonardDamage1:	
		Death.BittermanDamage:
		Death.Hexen2Damage:
		Death.Hexen2Fire:
		Death.Hexen2Electric:
		Death.Hexen2Extreme:
		Death.Hexen2ElectricExtreme:
		Death:
		XDeath:
		Death.Squish:
		XDeath.Squish:
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A -1
			stop
		Death.DukeSquish:
		XDeath.DukeSquish:
			TNT1 A 0 A_GiveToTarget("DukeStomp", 1)
			TNT1 A 0 SetPlayerProperty(0,1,PROP_TOTALLYFROZEN)
			LEO_ U 15
			TNT1 A 0 A_Jump(64,2)
			TNT1 A 0 A_GiveToTarget("DukeBootTaunt",1)
			TNT1 A 0 SetPlayerProperty(0,0,PROP_TOTALLYFROZEN)
			TNT1 A 0 A_PlaySound("duke/enemygib", CHAN_BODY)
			TNT1 A 1 A_SpawnItemEx("DukeBloodPool",0,0,0,0,0,0,0,SXF_USEBLOODCOLOR|SXF_NOCHECKPOSITION)
			TNT1 A -1
			stop
	}
}

actor Leonard_ShrinkEffect : Leonard
{
	-ISMONSTER
	-COUNTKILL
	-SHOOTABLE
	-SOLID
	+NOINTERACTION
	-NOGRAVITY
	+CLIENTSIDEONLY	
	Renderstyle Translucent
	Alpha 0.4
	States
	{
		Spawn:
			LEO_ U 0
			LEO_ U 0 A_SetUserVar("user_scalex", scalex*65536.0)
			LEO_ U 0 A_SetUserVar("user_scaley", scaley*65536.0)
			"####" "#" 1 A_SetScale(0.95*(user_scalex/65536.0),0.95*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.9*(user_scalex/65536.0),0.9*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.85*(user_scalex/65536.0),0.85*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.8*(user_scalex/65536.0),0.8*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.75*(user_scalex/65536.0),0.75*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.7*(user_scalex/65536.0),0.7*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.65*(user_scalex/65536.0),0.65*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.6*(user_scalex/65536.0),0.6*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.55*(user_scalex/65536.0),0.55*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.5*(user_scalex/65536.0),0.5*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.45*(user_scalex/65536.0),0.45*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.4*(user_scalex/65536.0),0.4*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.35*(user_scalex/65536.0),0.35*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.3*(user_scalex/65536.0),0.3*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.25*(user_scalex/65536.0),0.25*(user_scaley/65536.0))
			"####" "#" 1 A_SetScale(0.2*(user_scalex/65536.0),0.2*(user_scaley/65536.0))
			Stop
	}
}

Actor RRClass : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
Actor RRDrunkToken : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 1 }
Actor RRDrunkAmount : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 100 }
Actor RRFoodAmount : Inventory { -INVBAR +INVENTORY.UNDROPPABLE Inventory.MaxAmount 100 }
Actor RRFartAlert
{
	Projectile
	Speed 0
	Damage 0
	States
	{
		Spawn:
			TNT1 A 0
			TNT1 A 0 A_AlertMonsters(256)
			stop
	}
}

actor BurnDeathLeonard : BurnDeathDuke
{
  States
  {
  Death:
    TNT1 E 0 A_PlaySound("duke/burndeath2")
    TNT1 A 0 A_SpawnDebris("BuildFireTrail3",0)
    TNT1 A 0 A_SpawnDebris("BuildFireTrail4",0)
    DKBR EFG 6 Bright
    TNT1 A 0 A_Stop
    TNT1 A 0 A_SpawnDebris("BuildFireTrail3",0)
    TNT1 A 0 A_SpawnDebris("BuildFireTrail4",0)
    DKBR HIJ 6 Bright
    TNT1 A 0 A_SpawnItem("BurnedLeonard",1,0,0)
    TNT1 A 0 A_SpawnDebris("BuildFireTrail3",0)
    TNT1 A 0 A_SpawnDebris("BuildFireTrail4",0)
    DKBR KLM 6 Bright
    DKBR N 7 Bright
    DKBR O 8 Bright
    TNT1 AAA 0 A_SpawnDebris("BuildFireTrail3",0)
    TNT1 AAA 0 A_SpawnDebris("BuildFireTrail4",0)
    DKBR PQ 8 Bright
    Stop
  }
}

actor BurnedLeonard : BurnedDuke
{
  YScale 0.30
  XScale 0.361
  States
  {
  Spawn:
    LE_3 JJJJJJJJJJJJJJJJJJJJ 4 A_FadeIn(0.2)
    LE_3 J -1
    Stop
  }
}

Actor LeonardPissTimer : Inventory { -INVENTORY.INVBAR Inventory.MaxAmount 2147483647 Inventory.InterHubAmount 0 }